import{o as s,d as o,e,B as M,c as b,f as w,t as i,n as v,h as I,g as C,a as f,w as D,F as j,i as U,T as ue,r as $,b as R,k as ge,J as E,l as xe,u as a,p as pe}from"./index-LY41SGDx.js";import{b as O,a as he,_ as me,S as ye}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-hzpnDemg.js";import{u as be}from"./useClickOutside-CTEMaHQH.js";import{_ as fe,D as ke,S as we}from"./GoodsPagination-CZZmdawy.js";import{S as ve}from"./SearchIcon-wbt9D4QF.js";import{u as A}from"./useOrders-BrcpuZhA.js";const _e={},Ie={class:"fill-current",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ce(t,n){return s(),o("svg",Ie,n[0]||(n[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.31462 10.3761C5.45194 10.5293 5.65136 10.6257 5.87329 10.6257C5.8736 10.6257 5.8739 10.6257 5.87421 10.6257C6.0663 10.6259 6.25845 10.5527 6.40505 10.4062L9.40514 7.4082C9.69814 7.11541 9.69831 6.64054 9.40552 6.34754C9.11273 6.05454 8.63785 6.05438 8.34486 6.34717L6.62329 8.06753L6.62329 1.875C6.62329 1.46079 6.28751 1.125 5.87329 1.125C5.45908 1.125 5.12329 1.46079 5.12329 1.875L5.12329 8.06422L3.40516 6.34719C3.11218 6.05439 2.6373 6.05454 2.3445 6.34752C2.0517 6.64051 2.05185 7.11538 2.34484 7.40818L5.31462 10.3761Z",fill:""},null,-1)]))}const $e=O(_e,[["render",Ce]]),Oe={},Se={class:"fill-current",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function je(t,n){return s(),o("svg",Se,n[0]||(n[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.56462 1.62393C5.70193 1.47072 5.90135 1.37432 6.12329 1.37432C6.1236 1.37432 6.12391 1.37432 6.12422 1.37432C6.31631 1.37415 6.50845 1.44731 6.65505 1.59381L9.65514 4.5918C9.94814 4.88459 9.94831 5.35947 9.65552 5.65246C9.36273 5.94546 8.88785 5.94562 8.59486 5.65283L6.87329 3.93247L6.87329 10.125C6.87329 10.5392 6.53751 10.875 6.12329 10.875C5.70908 10.875 5.37329 10.5392 5.37329 10.125L5.37329 3.93578L3.65516 5.65282C3.36218 5.94562 2.8873 5.94547 2.5945 5.65248C2.3017 5.35949 2.30185 4.88462 2.59484 4.59182L5.56462 1.62393Z",fill:""},null,-1)]))}const De=O(Oe,[["render",je]]),Pe={},Me={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-calendar-clock-icon lucide-calendar-clock"};function Ue(t,n){return s(),o("svg",Me,n[0]||(n[0]=[M('<path d="M16 14v2.2l1.6 1"></path><path d="M16 2v4"></path><path d="M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"></path><path d="M3 10h5"></path><path d="M8 2v4"></path><circle cx="16" cy="16" r="6"></circle>',6)]))}const Le=O(Pe,[["render",Ue]]),Qe={},Be={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-calendar-days-icon lucide-calendar-days"};function Te(t,n){return s(),o("svg",Be,n[0]||(n[0]=[M('<path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path>',10)]))}const Ne=O(Qe,[["render",Te]]),Fe={},Ve={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-package-check-icon lucide-package-check"};function qe(t,n){return s(),o("svg",Ve,n[0]||(n[0]=[M('<path d="m16 16 2 2 4-4"></path><path d="M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"></path><path d="m7.5 4.27 9 5.15"></path><polyline points="3.29 7 12 12 20.71 7"></polyline><line x1="12" x2="12" y1="22" y2="12"></line>',5)]))}const Ee=O(Fe,[["render",qe]]),Ae={class:"grid grid-cols-4 gap-4 md:gap-4 mb-4 md:mb-4"},Re={class:"col-span-12 xl:col-span-1"},Ze={class:"rounded-2xl border border-warning-200 bg-white p-5 dark:border-warning-800 dark:bg-white/[0.03] md:p-6"},ze={class:"flex items-center justify-center w-12 h-12 bg-warning-100 rounded-xl dark:bg-warning-500/15"},Ge={class:"flex items-end justify-between mt-5"},He={class:"mt-2 font-bold text-warning-600 text-title-sm dark:text-white/90"},Je={class:"col-span-12 xl:col-span-1"},Ke={class:"rounded-2xl border border-blue-light-200 bg-white p-5 dark:border-blue-light-800 dark:bg-white/[0.03] md:p-6"},We={class:"flex items-center justify-center w-12 h-12 bg-blue-light-100 rounded-xl dark:bg-blue-light-500/15"},Xe={class:"flex items-end justify-between mt-5"},Ye={class:"mt-2 font-bold text-blue-light-600 text-title-sm dark:text-white/90"},et={class:"col-span-12 xl:col-span-1"},tt={class:"rounded-2xl border border-success-200 bg-white p-5 dark:border-success-800 dark:bg-white/[0.03] md:p-6"},st={class:"flex items-start justify-between"},rt={class:"flex items-center justify-center w-12 h-12 bg-success-100 rounded-xl dark:bg-success-500/15"},at={class:"flex items-end justify-between mt-5"},ot={class:"mt-2 font-bold text-success-600 text-title-sm dark:text-white/90"},nt={class:"col-span-12 xl:col-span-1"},lt={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6"},dt={class:"flex items-start justify-between"},ct={class:"flex items-center justify-center w-12 h-12 bg-gray-100 rounded-xl dark:bg-gray-800"},it={class:"flex items-end justify-between mt-5"},ut={class:"mt-2 font-bold text-gray-800 text-title-sm dark:text-white/90"},gt={__name:"OrdersStatistics",props:{arrowUpIcon:{type:Object,required:!0},arrowDownIcon:{type:Object,required:!0},shoppingCartIcon:{type:Object,required:!0},calendarClockIcon:{type:Object,required:!0},calendarDaysIcon:{type:Object,required:!0},packageCheckIcon:{type:Object,required:!0},statistics:{type:Object,required:!0}},setup(t){return(n,r)=>(s(),o("div",Ae,[e("div",Re,[e("div",Ze,[e("div",ze,[(s(),b(w(t.shoppingCartIcon),{class:"text-warning-600 dark:text-warning-400"}))]),e("div",Ge,[e("div",null,[r[0]||(r[0]=e("span",{class:"font-bold text-sm text-gray-500 dark:text-warning-400"},"Новые заказы",-1)),e("h4",He,i(t.statistics.current.pending),1)]),r[1]||(r[1]=e("span",{class:"flex items-center gap-1 rounded-full bg-gray-50 py-0.5 pl-2 pr-2.5 text-sm font-medium text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}," Всего ",-1))])])]),e("div",Je,[e("div",Ke,[e("div",We,[(s(),b(w(t.calendarClockIcon),{class:"text-blue-light-600 dark:text-blue-light-400"}))]),e("div",Xe,[e("div",null,[r[2]||(r[2]=e("span",{class:"font-bold text-sm text-gray-500 dark:text-blue-light-400"},"На выполнении",-1)),e("h4",Ye,i(t.statistics.current.processing),1)]),r[3]||(r[3]=e("span",{class:"flex items-center gap-1 rounded-full bg-gray-50 py-0.5 pl-2 pr-2.5 text-sm font-medium text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}," Всего ",-1))])])]),e("div",et,[e("div",tt,[e("div",st,[e("div",rt,[(s(),b(w(t.packageCheckIcon),{class:"text-success-600 dark:text-success-400"}))]),r[4]||(r[4]=e("span",{class:"flex items-center gap-1 rounded-full bg-gray-50 py-0.5 pl-2 pr-2.5 text-xs font-medium text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}," за текущий месяц ",-1))]),e("div",at,[e("div",null,[r[5]||(r[5]=e("span",{class:"font-bold text-sm text-gray-500 dark:text-success-400"},"Доставлено",-1)),e("h4",ot,i(t.statistics.current.shipped),1)]),e("span",{class:v(["flex items-center gap-1 rounded-full py-0.5 pl-2 pr-2.5 text-sm font-medium",t.statistics.percentages.shipped>0?"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500":t.statistics.percentages.shipped<0?"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500":"bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"])},[t.statistics.percentages.shipped!==0?(s(),b(w(t.statistics.percentages.shipped>0?t.arrowUpIcon:t.arrowDownIcon),{key:0})):I("",!0),C(" "+i(Math.abs(t.statistics.percentages.shipped))+"% ",1)],2)])])]),e("div",nt,[e("div",lt,[e("div",dt,[e("div",ct,[(s(),b(w(t.calendarDaysIcon),{class:"text-gray-800 dark:text-white/90"}))]),r[6]||(r[6]=e("span",{class:"flex items-center gap-1 rounded-full bg-gray-50 py-0.5 pl-2 pr-2.5 text-xs font-medium text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}," за текущий месяц ",-1))]),e("div",it,[e("div",null,[r[7]||(r[7]=e("span",{class:"font-bold text-sm text-gray-500 dark:text-gray-400"},"Сумма выполненых заказов",-1)),e("h4",ut,i(new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t.statistics.current.total_amount)),1)]),e("span",{class:v(["flex items-center gap-1 rounded-full py-0.5 pl-2 pr-2.5 text-sm font-medium",t.statistics.percentages.total_amount>0?"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500":t.statistics.percentages.total_amount<0?"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500":"bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"])},[t.statistics.percentages.total_amount!==0?(s(),b(w(t.statistics.percentages.total_amount>0?t.arrowUpIcon:t.arrowDownIcon),{key:0})):I("",!0),C(" "+i(Math.abs(t.statistics.percentages.total_amount))+"% ",1)],2)])])])]))}},xt={class:"flex flex-col justify-between gap-5 border-b border-gray-200 px-5 py-4 sm:flex-row sm:items-center dark:border-gray-800"},pt={class:"text-base font-medium text-gray-800 dark:text-white/90 flex flex-row items-center"},ht={class:"flex flex-col md:flex-row gap-3"},mt={class:"shadow-theme-xs inline-flex items-center justify-center gap-2 rounded-lg bg-white px-4 py-3 text-sm font-medium text-gray-700 ring-1 ring-gray-300 transition hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03]"},yt={__name:"OrdersHeader",props:{totalItems:{type:Number,required:!0},packageIcon:{type:Object,required:!0},downloadIcon:{type:Object,required:!0}},setup(t){return(n,r)=>(s(),o("div",xt,[e("h3",pt,[(s(),b(w(t.packageIcon),{class:"menu-item-icon-active mr-2"})),C(" Список заказов ("+i(t.totalItems)+") ",1)]),e("div",ht,[e("button",mt,[r[0]||(r[0]=C(" Скачать ")),(s(),b(w(t.downloadIcon)))])])]))}},bt={class:"relative flex-1 sm:flex-auto sm:w-auto sm:min-w-[490px]"},ft={class:"absolute top-1/2 left-4 -translate-y-1/2 text-gray-500 dark:text-gray-400"},kt=["value"],wt={__name:"OrdersSearch",props:{searchQuery:String,searchIcon:Object},emits:["update:searchQuery"],setup(t,{emit:n}){const r=n,m=()=>{r("update:searchQuery","")};return(c,d)=>(s(),o("div",bt,[e("span",ft,[(s(),b(w(t.searchIcon)))]),d[1]||(d[1]=e("label",{for:"searchQuery"},null,-1)),e("input",{id:"searchQuery",type:"text",placeholder:"Поиск по номеру заказа, ФИО, почте или телефону клиента",value:t.searchQuery,onInput:d[0]||(d[0]=g=>r("update:searchQuery",g.target.value)),class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent py-2.5 pr-12 pl-11 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"},null,40,kt),t.searchQuery?(s(),o("button",{key:0,onClick:m,class:"absolute top-1/2 right-2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-xl leading-none cursor-pointer bg-white dark:bg-gray-900 px-1 z-10"}," ✕ ")):I("",!0)]))}},vt={key:0,class:"text-gray-400"},_t={key:1,class:"text-gray-800 dark:text-white/90"},It={key:0,class:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-sm dark:bg-gray-900"},Ct={class:"overflow-y-auto divide-y divide-gray-200 custom-scrollbar max-h-60 dark:divide-gray-800",role:"listbox"},$t=["onClick","aria-selected"],Ot={class:"grow"},St={key:0,class:"w-5 h-5 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},jt={__name:"OrdersCategorySelector",props:{statuses:Array,selectedItem:Object,isOpen:Boolean},emits:["toggleDropdown","toggleItem"],setup(t,{emit:n}){const r=t,m=n,c=be(()=>{r.isOpen&&m("toggleDropdown")}),d=()=>{m("toggleDropdown")},g=x=>{m("toggleItem",x)},u=x=>x.value===null?r.selectedItem===null:r.selectedItem&&r.selectedItem.value===x.value;return(x,l)=>(s(),o("div",{class:"relative sm:min-w-[200px] sm:w-auto",ref_key:"multiSelectRef",ref:c},[e("div",{onClick:d,class:v(["dark:bg-dark-900 h-11 flex items-center w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",{"text-gray-800 dark:text-white/90":t.isOpen}])},[t.selectedItem?(s(),o("span",_t,i(t.selectedItem.label),1)):(s(),o("span",vt," Все статусы ")),(s(),o("svg",{class:v(["ml-auto",{"transform rotate-180":t.isOpen}]),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l[0]||(l[0]=[e("path",{d:"M4.79175 7.39551L10.0001 12.6038L15.2084 7.39551",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),2))],2),f(ue,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[t.isOpen?(s(),o("div",It,[e("ul",Ct,[(s(!0),o(j,null,U(t.statuses,k=>(s(),o("li",{key:k.id,onClick:L=>g(k),class:v(["relative flex items-center w-full px-3 py-2 border-transparent cursor-pointer first:rounded-t-lg last:rounded-b-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800",{"bg-gray-50 dark:bg-white/[0.03]":u(k)}]),role:"option","aria-selected":u(k)},[e("span",Ot,i(k.label),1),u(k)?(s(),o("svg",St,l[1]||(l[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):I("",!0)],10,$t))),128))])])):I("",!0)]),_:1})],512))}},Dt={class:"border-b border-gray-200 px-5 py-4 dark:border-gray-800"},Pt={class:"flex flex-col md:flex-row gap-3 sm:justify-between"},Mt={class:"flex flex-col md:flex-row gap-3"},Ut={__name:"OrdersFilters",props:{searchQuery:String,statuses:Array,selectedItem:Object,isOpen:Boolean,showFilter:Boolean,searchIcon:Object,settingsIcon:Object},emits:["update:searchQuery","toggleDropdown","toggleItem","update:showFilter"],setup(t,{emit:n}){const r=n;return(m,c)=>(s(),o("div",Dt,[e("div",Pt,[e("div",Mt,[f(wt,{searchQuery:t.searchQuery,searchIcon:t.searchIcon,"onUpdate:searchQuery":c[0]||(c[0]=d=>r("update:searchQuery",d))},null,8,["searchQuery","searchIcon"]),f(jt,{statuses:t.statuses,selectedItem:t.selectedItem,isOpen:t.isOpen,onToggleDropdown:c[1]||(c[1]=d=>r("toggleDropdown")),onToggleItem:c[2]||(c[2]=d=>r("toggleItem",d))},null,8,["statuses","selectedItem","isOpen"])])])]))}},Z={created(t,n){t.clickOutsideEvent=r=>{t===r.target||t.contains(r.target)||n.value(r)},document.addEventListener("click",t.clickOutsideEvent)},unmounted(t){document.removeEventListener("click",t.clickOutsideEvent)}},Lt={class:"relative",ref:"dropdown"},Qt=["onClick"],Bt={directives:{clickOutside:Z}},Tt=Object.assign(Bt,{__name:"DropdownMenu",props:{menuItems:{type:Array,default:()=>[]},buttonClass:{type:String,default:"text-gray-500 dark:text-gray-400"},menuClass:{type:String,default:"absolute right-0 z-40 w-40 p-2 space-y-1 bg-white border border-gray-200 top-full rounded-2xl shadow-lg dark:border-gray-800 dark:bg-gray-dark"},itemClass:{type:String,default:"flex w-full px-3 py-2 font-medium text-left text-gray-500 rounded-lg text-theme-xs hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-white/5 dark:hover:text-gray-300"}},setup(t){const n=$(!1),r=()=>{n.value=!n.value},m=()=>{n.value=!1},c=d=>{typeof d=="function"&&d(),m()};return(d,g)=>{const u=R("router-link");return ge((s(),o("div",Lt,[e("button",{onClick:r,class:v(t.buttonClass)},[E(d.$slots,"icon",{},()=>[g[0]||(g[0]=e("svg",{class:"fill-current",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.99902 10.245C6.96552 10.245 7.74902 11.0285 7.74902 11.995V12.005C7.74902 12.9715 6.96552 13.755 5.99902 13.755C5.03253 13.755 4.24902 12.9715 4.24902 12.005V11.995C4.24902 11.0285 5.03253 10.245 5.99902 10.245ZM17.999 10.245C18.9655 10.245 19.749 11.0285 19.749 11.995V12.005C19.749 12.9715 18.9655 13.755 17.999 13.755C17.0325 13.755 16.249 12.9715 16.249 12.005V11.995C16.249 11.0285 17.0325 10.245 17.999 10.245ZM13.749 11.995C13.749 11.0285 12.9655 10.245 11.999 10.245C11.0325 10.245 10.249 11.0285 10.249 11.995V12.005C10.249 12.9715 11.0325 13.755 11.999 13.755C12.9655 13.755 13.749 12.9715 13.749 12.005V11.995Z",fill:"currentColor"})],-1))])],2),n.value?(s(),o("div",{key:0,class:v(t.menuClass)},[E(d.$slots,"menu",{},()=>[(s(!0),o(j,null,U(t.menuItems,(x,l)=>(s(),o(j,null,[x.to?(s(),b(u,{key:`router-${l}`,to:x.to,onClick:k=>c(x.onClick),class:v(t.itemClass)},{default:D(()=>[C(i(x.label),1)]),_:2},1032,["to","onClick","class"])):(s(),o("button",{key:`button-${l}`,onClick:k=>c(x.onClick),class:v(t.itemClass)},i(x.label),11,Qt))],64))),256))])],2)):I("",!0)])),[[Z,m]])}}}),Nt={class:"p-4 border-t border-gray-100 dark:border-gray-800 sm:p-6"},Ft={class:"space-y-5"},Vt={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]",style:{overflow:"visible"}},qt={class:"max-w-full overflow-x-auto custom-scrollbar",style:{overflow:"visible"}},Et={key:0,class:"flex justify-center items-center h-screen"},At={key:1,class:"flex flex-col justify-center items-center h-screen font-bold text-error-700 text-theme-xl dark:text-error-500"},Rt={key:2,class:"flex flex-col justify-center items-center h-screen menu-item-icon-active text-center font-bold text-theme-xl m-5"},Zt={key:3,class:"min-w-full"},zt={class:"divide-y divide-gray-200 dark:divide-gray-700"},Gt={class:"px-5 py-4 sm:px-6"},Ht={class:"font-medium text-left text-gray-800 text-theme-sm dark:text-white/90"},Jt={class:"px-5 py-4 sm:px-6"},Kt={class:"text-gray-500 text-left text-theme-sm dark:text-gray-400"},Wt={class:"text-gray-500 text-left text-theme-sm dark:text-gray-400"},Xt={class:"px-5 py-4 sm:px-6"},Yt={"data-v-67f048e0":"",class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90"},es={"data-v-67f048e0":"",class:"block text-gray-500 text-theme-xs dark:text-gray-400"},ts={class:"px-5 py-4 sm:px-6"},ss={class:"text-gray-500 text-left text-theme-sm dark:text-gray-400"},rs={class:"px-5 py-4 sm:px-6"},as={class:"text-gray-500 text-left text-theme-sm dark:text-gray-400"},os={class:"px-5 py-4 sm:px-6"},ns={class:"font-medium text-left text-gray-800 text-theme-sm dark:text-white/90"},ls={class:"px-5 py-4 sm:px-6 text-center"},ds={key:0,class:"px-2.5 py-0.5 rounded-full font-bold text-xs bg-warning-50 text-warning-600 dark:bg-warning-500/15 dark:text-orange-400"},cs={key:1,class:"px-2.5 py-0.5 rounded-full font-bold text-xs bg-blue-light-50 text-blue-light-500 dark:bg-blue-light-500/15 dark:text-blue-light-500"},is={key:2,class:"px-2.5 py-0.5 rounded-full font-bold text-xs bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500"},us={key:3,class:"px-2.5 py-0.5 rounded-full font-bold text-xs bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500"},gs={key:4,class:"px-2.5 py-0.5 rounded-full font-bold text-xs bg-gray-100 text-gray-700 dark:bg-white/5 dark:text-white/80"},xs={class:"px-5 py-4 sm:px-2 text-center"},ps={__name:"OrdersTable",props:{loading:Boolean,error:String,orders:Array,formatter:Object},emits:["fetchOrders","edit","updateStatus"],setup(t,{emit:n}){const r=n,m=()=>{r("fetchOrders")},c=(g,u)=>{r("updateStatus",g,u)},d=g=>[{label:"Новый",onClick:()=>c(g,"pending")},{label:"Выполнение",onClick:()=>c(g,"processing")},{label:"Отправлен",onClick:()=>c(g,"shipped")},{label:"Отменён",onClick:()=>c(g,"cancelled")},{label:"Возврат",onClick:()=>c(g,"return")}];return(g,u)=>{const x=R("router-link");return s(),o("div",Nt,[e("div",Ft,[e("div",Vt,[e("div",qt,[t.loading?(s(),o("div",Et,u[0]||(u[0]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-brand-500"},null,-1)]))):t.error?(s(),o("div",At,[u[1]||(u[1]=C(" Ошибка при загрузке")),u[2]||(u[2]=e("br",null,null,-1)),e("button",{class:"inline-flex items-center justify-center font-medium gap-2 rounded-lg transition px-4 py-3 text-sm bg-brand-500 text-white shadow-theme-xs hover:bg-brand-600 disabled:bg-brand-300 mt-2",onClick:m}," Попробовать снова ")])):t.orders.length===0?(s(),o("div",Rt," Заказы не найдены ")):(s(),o("table",Zt,[u[3]||(u[3]=e("thead",null,[e("tr",{class:"border-gray-100 border-y bg-gray-50 dark:border-gray-800 dark:bg-gray-900"},[e("th",{class:"cursor-pointer px-5 py-3 text-left w-2/12 sm:px-6"},[e("div",{class:"flex items-center gap-3"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"№ Заказа")])]),e("th",{class:"cursor-pointer px-5 py-3 text-left w-1/12 sm:px-6"},[e("div",{class:"flex items-left gap-3"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Дата")])]),e("th",{class:"px-5 py-3 text-left w-3/12 sm:px-6"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Клиент")]),e("th",{class:"px-5 py-3 text-left w-2/12 sm:px-6"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Телефон")]),e("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Товары")]),e("th",{class:"px-5 py-3 text-left w-1/12 sm:px-6"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Сумма")]),e("th",{class:"px-5 py-3 text-center w-2/12 sm:px-6",colspan:"2"},[e("p",{class:"font-bold text-gray-500 text-theme-xs dark:text-gray-400"},"Статус заказа")])])],-1)),e("tbody",zt,[(s(!0),o(j,null,U(t.orders,l=>(s(),o("tr",{key:l.id,class:"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",Gt,[f(x,{to:`/orders/${l.order}`},{default:D(()=>[e("p",Ht,i(l.order),1)]),_:2},1032,["to"])]),e("td",Jt,[e("p",Kt,i(new Date(l.created_at).toLocaleDateString("ru-RU")),1),e("p",Wt,i(new Date(l.created_at).toLocaleTimeString("ru-RU")),1)]),e("td",Xt,[e("span",Yt,i(l.name),1),e("span",es,i(l.email),1)]),e("td",ts,[e("p",ss,i(l.phone),1)]),e("td",rs,[e("p",as,i(l.items?l.items.length:0)+" товаров ",1)]),e("td",os,[e("p",ns,i(t.formatter.format(l.total_amount)),1)]),e("td",ls,[l.status==="pending"?(s(),o("span",ds," Новый ")):l.status==="processing"?(s(),o("span",cs," Выполнение ")):l.status==="shipped"?(s(),o("span",is," Отправлен ")):l.status==="return"?(s(),o("span",us," Возврат ")):l.status==="cancelled"?(s(),o("span",gs," Отменён ")):I("",!0)]),e("td",xs,[f(Tt,{"menu-items":d(l)},null,8,["menu-items"])])]))),128))])]))])])])])}}},hs={class:"space-y-5 sm:space-y-6"},ms={class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},_s={__name:"Orders",setup(t){const n=pe(),r=$("Заказы"),m=$e,c=De,d=Le,g=Ne,u=Ee,x=ye,l=ke,k=we,L=ve,{orders:z,loading:G,error:H,page:J,itemsPerPage:K,totalItems:Q,totalPages:W,searchQuery:B,selectedStatus:T,statuses:X,filters:_,visiblePages:Y,formatter:ee,fetchOrders:P,fetchOrderStatistics:te,handlePrevPage:se,handleNextPage:re,handleGoToPage:ae,deleteOrder:oe}=A(),N=$(!1),S=$(!1),F=$({current:{pending:0,processing:0,shipped:0,total_amount:0},previous:{pending:0,processing:0,shipped:0,total_amount:0},percentages:{pending:0,processing:0,shipped:0,total_amount:0}}),ne=()=>{S.value=!S.value},le=y=>{T.value=y.value===null?null:y,S.value=!1},de=y=>{n.push(`/orders/edit/${y.id}`)},ce=async(y,p)=>{const h=await oe(y.id);p(h)},ie=async(y,p)=>{const{updateOrder:h}=A(),q=await h(y.id,{status:p});q.success?(P(),V()):console.error("Ошибка обновления статуса:",q.errors)},V=async()=>{try{const y=await te();F.value=y}catch(y){console.error("Ошибка загрузки статистики:",y)}};return xe(()=>{P(),V()}),(y,p)=>(s(),b(he,null,{default:D(()=>[f(me,{pageTitle:r.value},null,8,["pageTitle"]),e("div",hs,[f(gt,{arrowDownIcon:a(m),arrowUpIcon:a(c),shoppingCartIcon:a(x),calendarClockIcon:a(d),calendarDaysIcon:a(g),packageCheckIcon:a(u),statistics:F.value},null,8,["arrowDownIcon","arrowUpIcon","shoppingCartIcon","calendarClockIcon","calendarDaysIcon","packageCheckIcon","statistics"]),e("div",ms,[f(yt,{totalItems:a(Q),packageIcon:a(x),downloadIcon:a(l)},null,8,["totalItems","packageIcon","downloadIcon"]),f(Ut,{searchQuery:a(B),statuses:a(X),selectedItem:a(T),isOpen:S.value,showFilter:N.value,checkboxSale:a(_).sale.true,checkboxNoSale:a(_).sale.false,checkboxPublished:a(_).published.true,checkboxNoPublished:a(_).published.false,searchIcon:a(L),settingsIcon:a(k),"onUpdate:searchQuery":p[0]||(p[0]=h=>B.value=h),onToggleDropdown:ne,onToggleItem:le,"onUpdate:showFilter":p[1]||(p[1]=h=>N.value=h),"onUpdate:checkboxSale":p[2]||(p[2]=h=>a(_).sale.true=h),"onUpdate:checkboxNoSale":p[3]||(p[3]=h=>a(_).sale.false=h),"onUpdate:checkboxPublished":p[4]||(p[4]=h=>a(_).published.true=h),"onUpdate:checkboxNoPublished":p[5]||(p[5]=h=>a(_).published.false=h)},null,8,["searchQuery","statuses","selectedItem","isOpen","showFilter","checkboxSale","checkboxNoSale","checkboxPublished","checkboxNoPublished","searchIcon","settingsIcon"]),f(ps,{loading:a(G),error:a(H),orders:a(z),formatter:a(ee),onFetchOrders:a(P),onEdit:de,onDelete:ce,onUpdateStatus:ie},null,8,["loading","error","orders","formatter","onFetchOrders"]),f(fe,{page:a(J),totalPages:a(W),totalItems:a(Q),itemsPerPage:a(K),visiblePages:a(Y),onPrevPage:a(se),onNextPage:a(re),onGoToPage:a(ae)},null,8,["page","totalPages","totalItems","itemsPerPage","visiblePages","onPrevPage","onNextPage","onGoToPage"])])])]),_:1}))}};export{_s as default};
