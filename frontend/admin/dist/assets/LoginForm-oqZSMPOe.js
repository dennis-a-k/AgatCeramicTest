import{r as g,a as C,c as q,w as E,b as o,d as t,n as m,e as f,v as x,t as i,f as u,u as y,g as U,o as n,h as j}from"./index-BKbSAzgn.js";import{u as A}from"./useAuth-B5mWgE78.js";const B={class:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md"},L={class:"flex justify-center mb-6"},M={key:0,class:"mb-4"},$={key:0,class:"text-red-500 text-sm"},D={class:"mb-4"},N={key:0,class:"mt-1.5 text-theme-xs text-error-500"},R={class:"mb-4"},S={key:0,class:"mt-1.5 text-theme-xs text-error-500"},T={key:1,class:"mb-6"},z={key:0,class:"mt-1.5 text-theme-xs text-error-500"},F=["disabled"],O={key:0},G={key:1},H={key:2,class:"mt-4 p-3 text-green-500 text-center"},P={__name:"LoginForm",setup(I){const w=j(),{login:h,register:k,loading:v,error:p}=A(),a=g(!0),r=C({name:"",email:"",password:"",password_confirmation:"",remember:!1}),d=q(()=>{const l={};if(p.value&&typeof p.value=="object")for(const[e,s]of Object.entries(p.value))Array.isArray(s)&&s.length>0&&(l[e]=s[0]);return l}),b=l=>d.value[l]?"dark:bg-dark-900 shadow-theme-xs focus:border-error-300 focus:ring-error-500/10 dark:focus:border-error-800 h-11 w-full rounded-lg border border-error-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-error-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none":"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none";E(a,()=>{r.name="",r.email="",r.password="",r.password_confirmation="",p.value={}});const c=g(""),_=async()=>{try{await k(r),r.name="",r.email="",r.password="",r.password_confirmation="",a.value=!0,c.value="Регистрация прошла успешно! Теперь вы можете войти в систему.",setTimeout(()=>{c.value=""},5e3)}catch{}},V=async()=>{try{await h(r)&&w.push("/")}catch{}};return(l,e)=>(n(),o("div",B,[t("div",L,[t("button",{onClick:e[0]||(e[0]=s=>a.value=!0),class:m(["px-4 py-2 font-medium",a.value?"text-brand-500 border-b-2 border-brand-500":"text-gray-500 hover:text-gray-700"])}," Вход ",2),t("button",{onClick:e[1]||(e[1]=s=>a.value=!1),class:m(["px-4 py-2 font-medium",a.value?"text-gray-500 hover:text-gray-700":"text-brand-500 border-b-2 border-brand-500"])}," Регистрация ",2)]),t("form",{onSubmit:e[6]||(e[6]=U(s=>a.value?V():_(),["prevent"]))},[a.value?u("",!0):(n(),o("div",M,[e[7]||(e[7]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"}," ФИО ",-1)),f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.name=s),id:"name",type:"text",class:m(b("name")),required:""},null,2),[[x,r.name]]),d.value.name?(n(),o("div",$,i(d.value.name),1)):u("",!0)])),t("div",D,[e[8]||(e[8]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"email"}," Почта ",-1)),f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.email=s),id:"email",type:"email",class:m(b("email")),required:""},null,2),[[x,r.email]]),d.value.email?(n(),o("div",N,i(d.value.email),1)):u("",!0)]),t("div",R,[e[9]||(e[9]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"}," Пароль ",-1)),f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.password=s),id:"password",type:"password",class:m(b("password")),required:""},null,2),[[x,r.password]]),d.value.password?(n(),o("div",S,i(d.value.password),1)):u("",!0)]),a.value?u("",!0):(n(),o("div",T,[e[10]||(e[10]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password_confirmation"}," Повторить пароль ",-1)),f(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.password_confirmation=s),id:"password_confirmation",type:"password",class:m(b("password_confirmation")),required:""},null,2),[[x,r.password_confirmation]]),d.value.password_confirmation?(n(),o("div",z,i(d.value.password_confirmation),1)):u("",!0)])),t("button",{type:"submit",class:"w-full bg-brand-500 text-white py-2 px-4 rounded-lg hover:bg-brand-600 transition duration-200",disabled:y(v)},[y(v)?(n(),o("span",G,i(a.value?"Авторизация...":"Регистрация..."),1)):(n(),o("span",O,i(a.value?"Войти":"Зарегистрироваться"),1))],8,F),c.value?(n(),o("div",H,i(c.value),1)):u("",!0)],32)]))}};export{P as default};
