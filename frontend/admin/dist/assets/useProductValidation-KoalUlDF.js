import{y as M,o as n,c as i,b as r,d as y,v as h,n as g,t as c,e as b,A as N,F as C,f as U,B as G,p as R,k as S,r as x,w as v,g as J,C as q,a as H}from"./index-DF0FL0Im.js";import{_ as F,a as O}from"./useCategories-ChKX-P5x.js";const W={class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},K={class:"space-y-5 p-4 sm:p-6 dark:border-gray-800"},Q={class:"grid grid-cols-1 gap-5 md:grid-cols-2"},X={key:0,class:"mt-1.5 text-theme-xs text-error-500"},Y={key:0,class:"mt-1.5 text-theme-xs text-error-500"},Z={class:"grid grid-cols-1 gap-5 md:grid-cols-3"},ee={class:"relative z-20 bg-transparent"},re={class:"relative z-20 bg-transparent"},te=["value"],oe={key:0,class:"mt-1.5 text-theme-xs text-error-500"},ae={class:"relative z-20 bg-transparent"},se={class:"relative z-20 bg-transparent"},le=["value"],de={key:0,class:"mt-1.5 text-theme-xs text-error-500"},ne={class:"relative z-20 bg-transparent"},ie={class:"relative z-20 bg-transparent"},ue=["value"],ce={key:0,class:"mt-1.5 text-theme-xs text-error-500"},pe={key:0,class:"mt-1.5 text-theme-xs text-error-500"},ge={key:0,class:"mt-1.5 text-theme-xs text-error-500"},be={key:0,class:"mt-1.5 text-theme-xs text-error-500"},me={class:"flex space-x-6"},ye={for:"product-unit1",class:"flex cursor-pointer items-center text-sm font-medium text-gray-700 select-none dark:text-gray-400"},ve={for:"product-unit2",class:"flex cursor-pointer items-center text-sm font-medium text-gray-700 select-none dark:text-gray-400"},ke={class:"flex space-x-6"},he={class:"col-span-full"},fe={key:0,class:"mt-1.5 text-theme-xs text-error-500"},dr=M({__name:"ProductCharacteristics",props:{product:{},errors:{},categories:{},brands:{},colors:{}},setup(s){const a=e=>e?"dark:bg-dark-900 shadow-theme-xs focus:border-error-300 focus:ring-error-500/10 dark:focus:border-error-800 w-full resize-none rounded-lg border border-error-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-error-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30":"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full resize-none rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30",l=e=>e?"dark:bg-dark-900 shadow-theme-xs focus:border-error-300 focus:ring-error-500/10 dark:focus:border-error-800 h-11 w-full rounded-lg border border-error-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-error-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none":"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none";return(e,t)=>(n(),i("div",W,[t[31]||(t[31]=r("div",{class:"border-b border-gray-200 px-6 py-4 dark:border-gray-800"},[r("h2",{class:"text-lg font-medium text-gray-800 dark:text-white"}," Характеристики товара ")],-1)),r("div",K,[r("div",Q,[r("div",null,[t[13]||(t[13]=r("label",{for:"product-name",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Наименование",-1)),y(r("input",{type:"text",id:"product-name",class:g(l(e.errors.name)),placeholder:"Наименование товара","onUpdate:modelValue":t[0]||(t[0]=o=>e.product.name=o)},null,2),[[h,e.product.name]]),e.errors.name?(n(),i("p",X,c(e.errors.name),1)):b("",!0)]),r("div",null,[t[14]||(t[14]=r("label",{for:"product-country",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Страна",-1)),y(r("input",{type:"text",id:"product-country",class:g(l(e.errors.country)),placeholder:"Страна производитель","onUpdate:modelValue":t[1]||(t[1]=o=>e.product.country=o)},null,2),[[h,e.product.country]]),e.errors.country?(n(),i("p",Y,c(e.errors.country),1)):b("",!0)])]),r("div",Z,[r("div",ee,[t[17]||(t[17]=r("label",{for:"product-category",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Категория",-1)),r("div",re,[y(r("select",{id:"product-category","onUpdate:modelValue":t[2]||(t[2]=o=>e.product.category_id=o),class:g(l(e.errors.category)),required:""},[t[15]||(t[15]=r("option",{value:"",class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},"Выберите категорию",-1)),(n(!0),i(C,null,U(e.categories.slice(1),o=>(n(),i("option",{key:o.id,value:o.value,class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},c(o.label),9,te))),128))],2),[[N,e.product.category_id]]),t[16]||(t[16]=r("span",{class:"pointer-events-none absolute top-1/2 right-4 z-30 -translate-y-1/2 text-gray-700 dark:text-gray-400"},[r("svg",{class:"stroke-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M4.79175 7.396L10.0001 12.6043L15.2084 7.396",stroke:"","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),e.errors.category?(n(),i("p",oe,c(e.errors.category),1)):b("",!0)]),r("div",ae,[t[20]||(t[20]=r("label",{for:"product-brand",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Бренд",-1)),r("div",se,[y(r("select",{id:"product-brand","onUpdate:modelValue":t[3]||(t[3]=o=>e.product.brand_id=o),class:g(l(e.errors.brand)),required:""},[t[18]||(t[18]=r("option",{value:"",class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},"Выберите бренд",-1)),(n(!0),i(C,null,U(e.brands,o=>(n(),i("option",{key:o.id,value:o.id,class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},c(o.name),9,le))),128))],2),[[N,e.product.brand_id]]),t[19]||(t[19]=r("span",{class:"pointer-events-none absolute top-1/2 right-4 z-30 -translate-y-1/2 text-gray-700 dark:text-gray-400"},[r("svg",{class:"stroke-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M4.79175 7.396L10.0001 12.6043L15.2084 7.396",stroke:"","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),e.errors.brand?(n(),i("p",de,c(e.errors.brand),1)):b("",!0)]),r("div",ne,[t[23]||(t[23]=r("label",{for:"product-color",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Цвет",-1)),r("div",ie,[y(r("select",{id:"product-color","onUpdate:modelValue":t[4]||(t[4]=o=>e.product.color_id=o),class:g(l(e.errors.color)),required:""},[t[21]||(t[21]=r("option",{value:"",class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},"Выберите цвет",-1)),(n(!0),i(C,null,U(e.colors,o=>(n(),i("option",{key:o.id,value:o.id,class:"text-gray-700 dark:bg-gray-900 dark:text-gray-400"},c(o.name),9,ue))),128))],2),[[N,e.product.color_id]]),t[22]||(t[22]=r("span",{class:"pointer-events-none absolute top-1/2 right-4 z-30 -translate-y-1/2 text-gray-700 dark:text-gray-400"},[r("svg",{class:"stroke-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M4.79175 7.396L10.0001 12.6043L15.2084 7.396",stroke:"","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),e.errors.color?(n(),i("p",ce,c(e.errors.color),1)):b("",!0)]),r("div",null,[t[24]||(t[24]=r("label",{for:"product-price",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Цена",-1)),y(r("input",{type:"number",step:"0.01",id:"product-price",min:"0",class:g(l(e.errors.price)),placeholder:"Стоимость товара","onUpdate:modelValue":t[5]||(t[5]=o=>e.product.price=o)},null,2),[[h,e.product.price,void 0,{number:!0}]]),e.errors.price?(n(),i("p",pe,c(e.errors.price),1)):b("",!0)]),r("div",null,[t[25]||(t[25]=r("label",{for:"product-article",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Артикул",-1)),y(r("input",{type:"text",id:"product-article",class:g(l(e.errors.article)),placeholder:"Артикул товара","onUpdate:modelValue":t[6]||(t[6]=o=>e.product.article=o)},null,2),[[h,e.product.article]]),e.errors.article?(n(),i("p",ge,c(e.errors.article),1)):b("",!0)]),r("div",null,[t[26]||(t[26]=r("label",{for:"product-product_code",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Код товара",-1)),y(r("input",{type:"text",id:"product-product_code",class:g(l(e.errors.productCode)),placeholder:"Код товара","onUpdate:modelValue":t[7]||(t[7]=o=>e.product.product_code=o)},null,2),[[h,e.product.product_code]]),e.errors.productCode?(n(),i("p",be,c(e.errors.productCode),1)):b("",!0)]),r("div",null,[t[29]||(t[29]=r("div",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Единица измерения",-1)),r("div",me,[r("label",ye,[y(r("input",{id:"product-unit1",type:"radio","onUpdate:modelValue":t[8]||(t[8]=o=>e.product.unit=o),value:"шт",class:"sr-only"},null,512),[[G,e.product.unit]]),r("div",{class:g([e.product.unit==="шт"?"border-brand-500 bg-brand-500":"bg-transparent border-gray-300 dark:border-gray-700","hover:border-brand-500 dark:hover:border-brand-500 mr-3 flex h-5 w-5 items-center justify-center rounded-full border-[1.25px]"])},[r("span",{class:g([e.product.unit==="шт"?"":"opacity-0","h-2 w-2 rounded-full bg-white"])},null,2)],2),t[27]||(t[27]=R(" шт. "))]),r("label",ve,[y(r("input",{id:"product-unit2",type:"radio","onUpdate:modelValue":t[9]||(t[9]=o=>e.product.unit=o),value:"кв.м",class:"sr-only"},null,512),[[G,e.product.unit]]),r("div",{class:g([e.product.unit==="кв.м"?"border-brand-500 bg-brand-500":"bg-transparent border-gray-300 dark:border-gray-700","hover:border-brand-500 dark:hover:border-brand-500 mr-3 flex h-5 w-5 items-center justify-center rounded-full border-[1.25px]"])},[r("span",{class:g([e.product.unit==="кв.м"?"":"opacity-0","h-2 w-2 rounded-full bg-white"])},null,2)],2),t[28]||(t[28]=R(" м² "))])])]),r("div",ke,[S(F,{id:"is_published",label:"Опубликован",checked:e.product.is_published,"onUpdate:checked":t[10]||(t[10]=o=>e.product.is_published=o)},null,8,["checked"]),S(F,{id:"is_sale",label:"Распродажа",checked:e.product.is_sale,"onUpdate:checked":t[11]||(t[11]=o=>e.product.is_sale=o)},null,8,["checked"])]),r("div",he,[t[30]||(t[30]=r("label",{for:"product-description",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Описание",-1)),y(r("textarea",{id:"product-description",placeholder:"Полное описание товара",type:"text",rows:"7","onUpdate:modelValue":t[12]||(t[12]=o=>e.product.description=o),class:g(a(e.errors.description))},null,2),[[h,e.product.description]]),e.errors.description?(n(),i("p",fe,c(e.errors.description),1)):b("",!0)])])])]))}}),xe={key:0,class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},we={class:"space-y-5 p-4 sm:p-6"},$e={class:"grid grid-cols-1 gap-5 md:grid-cols-3"},_e={key:0,class:"mt-1.5 text-theme-xs text-error-500"},Ce={key:0,class:"mt-1.5 text-theme-xs text-error-500"},Ue={key:0,class:"mt-1.5 text-theme-xs text-error-500"},nr=M({__name:"CeramicCharacteristics",props:{product:{},errors:{},categories:{},isCeramicCategory:{type:Boolean}},setup(s){const a=l=>l?"dark:bg-dark-900 shadow-theme-xs focus:border-error-300 focus:ring-error-500/10 dark:focus:border-error-800 h-11 w-full rounded-lg border border-error-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-error-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30":"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30";return(l,e)=>l.isCeramicCategory?(n(),i("div",xe,[e[6]||(e[6]=r("div",{class:"border-b border-gray-200 px-6 py-4 dark:border-gray-800"},[r("h2",{class:"text-lg font-medium text-gray-800 dark:text-white"}," Характеристики для керамики ")],-1)),r("div",we,[r("div",$e,[r("div",null,[e[3]||(e[3]=r("label",{for:"product-texture",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Поверхность",-1)),y(r("input",{type:"text",id:"product-texture",class:g(a(l.errors.texture)),placeholder:"Тип поверхности","onUpdate:modelValue":e[0]||(e[0]=t=>l.product.texture=t)},null,2),[[h,l.product.texture]]),l.errors.texture?(n(),i("p",_e,c(l.errors.texture),1)):b("",!0)]),r("div",null,[e[4]||(e[4]=r("label",{for:"product-pattern",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Рисунок",-1)),y(r("input",{type:"text",id:"product-pattern",class:g(a(l.errors.pattern)),placeholder:"Тип рисунка или монотон","onUpdate:modelValue":e[1]||(e[1]=t=>l.product.pattern=t)},null,2),[[h,l.product.pattern]]),l.errors.pattern?(n(),i("p",Ce,c(l.errors.pattern),1)):b("",!0)]),r("div",null,[e[5]||(e[5]=r("label",{for:"product-collection",class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Коллекция",-1)),y(r("input",{type:"text",id:"product-collection",class:g(a(l.errors.collection)),placeholder:"Коллекция товара","onUpdate:modelValue":e[2]||(e[2]=t=>l.product.collection=t)},null,2),[[h,l.product.collection]]),l.errors.collection?(n(),i("p",Ue,c(l.errors.collection),1)):b("",!0)])])])])):b("",!0)}}),Ve={class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},Pe={class:"space-y-5 p-4 sm:p-6"},je={class:"grid grid-cols-1 gap-5 md:grid-cols-3"},Ae={key:0},Be=["for"],Ee=["id","onUpdate:modelValue"],Le={key:0,class:"mt-1.5 text-theme-xs text-error-500"},ze={key:1},Se=["for"],Me=["id","onUpdate:modelValue"],Te={key:2,class:"h-full flex"},De={key:3},Ne=["for"],Re=["id","onUpdate:modelValue"],I="dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30",Fe="dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full resize-none rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30",ir=M({__name:"AdditionalCharacteristics",props:{product:{}},setup(s){return(a,l)=>(n(),i("div",Ve,[l[0]||(l[0]=r("div",{class:"border-b border-gray-200 px-6 py-4 dark:border-gray-800"},[r("h2",{class:"text-lg font-medium text-gray-800 dark:text-white"},[R(" Дополнительные характеристики товара"),r("br")])],-1)),r("div",Pe,[r("div",je,[(n(!0),i(C,null,U(a.product.attribute_values,(e,t)=>(n(),i("div",{key:e.attribute.id},[e.attribute.type==="string"?(n(),i("div",Ae,[r("label",{for:`attr-string${e.attribute.id}`,class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},c(e.attribute.name)+" "+c(e.attribute.unit?`(${e.attribute.unit})`:""),9,Be),y(r("input",{id:`attr-string${e.attribute.id}`,type:"text","onUpdate:modelValue":o=>e.string_value=o,class:g(I)},null,8,Ee),[[h,e.string_value]]),e.error?(n(),i("p",Le,c(e.error),1)):b("",!0)])):e.attribute.type==="number"?(n(),i("div",ze,[r("label",{for:`attr-number${e.attribute.id}`,class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},c(e.attribute.name)+" "+c(e.attribute.unit?`(${e.attribute.unit})`:""),9,Se),y(r("input",{id:`attr-number${e.attribute.id}`,type:"number",step:"0.01",min:"0","onUpdate:modelValue":o=>e.number_value=o,class:g(I)},null,8,Me),[[h,e.number_value,void 0,{number:!0}]])])):e.attribute.type==="boolean"?(n(),i("div",Te,[S(F,{id:"attr-"+e.attribute.id,label:e.attribute.name,checked:e.boolean_value,"onUpdate:checked":o=>e.boolean_value=o},null,8,["id","label","checked","onUpdate:checked"])])):e.attribute.type==="text"?(n(),i("div",De,[r("label",{for:`attr-text${e.attribute.id}`,class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},c(e.attribute.name)+" "+c(e.attribute.unit?`(${e.attribute.unit})`:""),9,Ne),y(r("textarea",{id:`attr-text${e.attribute.id}`,rows:"4","onUpdate:modelValue":o=>e.text_value=o,class:g(Fe)},null,8,Re),[[h,e.text_value]])])):b("",!0)]))),128))])])]))}}),Ge={class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},Ie={class:"p-4 sm:p-6"},Je={key:0,class:"mb-4"},qe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},He=["onDragstart","onDrop"],Oe=["src","alt"],We=["onClick"],Ke={class:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded"},Qe={key:1},Xe={for:"product-image",class:"shadow-theme-xs group hover:border-brand-500 block cursor-pointer rounded-lg border-2 border-dashed border-gray-300 transition dark:border-gray-800"},Ye={key:2,class:"mt-4"},Ze={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},er=["src","alt"],rr=["onClick"],tr={key:3,class:"text-sm text-gray-500 mt-2"},ur=M({__name:"ProductImageUpload",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{expose:a,emit:l}){const e=s,t=l,o=x([...e.modelValue]),u=x([]),f=x(null),$=x(null),j="http://test.dennistp.beget.tech";v(()=>e.modelValue,p=>{o.value=[...p]},{deep:!0}),v(o,p=>{t("update:modelValue",p)},{deep:!0});const A=p=>p.image_path.startsWith("http")?p.image_path:`${j}/storage/${p.image_path}`,B=p=>window.URL.createObjectURL(p),_=(p,d,m)=>{$.value={show:!0,type:p,title:d,message:m},setTimeout(()=>{$.value=null},5e3)},E=p=>{const d=p.target,m=d.files;if(!m)return;const k=["image/png","image/jpeg","image/jpg","image/webp"],w=5*1024*1024;for(let V=0;V<m.length;V++){const P=m[V];if(!k.includes(P.type)){_("error","Неподдерживаемый формат",`Файл ${P.name} имеет неподдерживаемый формат. Разрешены только PNG, JPG, JPEG, WEBP.`);continue}if(P.size>w){_("error","Файл слишком большой",`Файл ${P.name} слишком большой. Максимальный размер 5MB.`);continue}if(o.value.length+u.value.length>=5){_("error","Максимальное количество изображений","Максимальное количество изображений - 5.");break}u.value.push(P)}d.value=""},L=p=>{o.value.splice(p,1),o.value.forEach((d,m)=>{d.sort_order=m})},z=p=>{u.value.splice(p,1)},T=(p,d)=>{f.value=d,p.dataTransfer.effectAllowed="move"},D=(p,d)=>{const m=f.value;if(m===null||m===d)return;const k=o.value[m];o.value[m]=o.value[d],o.value[d]=k,o.value.forEach((w,V)=>{w.sort_order=V}),f.value=null};return a({newFiles:u}),(p,d)=>(n(),i("div",Ge,[S(O,{alert:$.value},null,8,["alert"]),d[4]||(d[4]=r("div",{class:"border-b border-gray-200 px-6 py-4 dark:border-gray-800"},[r("h2",{class:"text-lg font-medium text-gray-800 dark:text-white"}," Фото товара (макс. 5 изображений) ")],-1)),r("div",Ie,[o.value.length>0?(n(),i("div",Je,[d[1]||(d[1]=r("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Текущие фото:",-1)),r("div",qe,[(n(!0),i(C,null,U(o.value,(m,k)=>(n(),i("div",{key:m.id||k,class:"relative group",draggable:"true",onDragstart:w=>T(w,k),onDragover:d[0]||(d[0]=J(()=>{},["prevent"])),onDrop:w=>D(w,k)},[r("img",{src:A(m),alt:`Фото ${k+1}`,class:"w-full h-24 object-cover rounded-lg border border-gray-200"},null,8,Oe),r("button",{onClick:w=>L(k),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",type:"button"}," × ",8,We),r("div",Ke,c(k+1),1)],40,He))),128))])])):b("",!0),o.value.length<5?(n(),i("div",Qe,[r("label",Xe,[d[2]||(d[2]=q('<div class="flex justify-center p-10"><div class="flex max-w-[260px] flex-col items-center gap-4"><div class="inline-flex h-13 w-13 items-center justify-center rounded-full border border-gray-200 text-gray-700 transition dark:border-gray-800 dark:text-gray-400"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M20.0004 16V18.5C20.0004 19.3284 19.3288 20 18.5004 20H5.49951C4.67108 20 3.99951 19.3284 3.99951 18.5V16M12.0015 4L12.0015 16M7.37454 8.6246L11.9994 4.00269L16.6245 8.6246" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><p class="text-center text-sm text-gray-500 dark:text-gray-400"><span class="font-medium text-gray-800 dark:text-white/90">Щелкните, чтобы загрузить,</span> или перетащите PNG, JPG, JPEG или WEBP (макс. 800x800 пикселей) </p></div></div>',1)),r("input",{type:"file",id:"product-image",class:"hidden",multiple:"",accept:".png,.jpg,.jpeg,.webp",onChange:E},null,32)])])):b("",!0),u.value.length>0?(n(),i("div",Ye,[d[3]||(d[3]=r("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Новые фото для загрузки: ",-1)),r("div",Ze,[(n(!0),i(C,null,U(u.value,(m,k)=>(n(),i("div",{key:k,class:"relative group"},[r("img",{src:B(m),alt:`Новое фото ${k+1}`,class:"w-full h-24 object-cover rounded-lg border border-gray-200"},null,8,er),r("button",{onClick:w=>z(k),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",type:"button"}," × ",8,rr)]))),128))])])):b("",!0),o.value.length>=5?(n(),i("p",tr," Достигнуто максимальное количество изображений (5) ")):b("",!0)])]))}}),or="http://test.dennistp.beget.tech";function cr(){const s=x([]),a=x(!1),l=x(null);return{brands:s,loading:a,error:l,fetchAllBrands:async()=>{a.value=!0,l.value=null;const t=new URLSearchParams;t.append("per_page","all");const o=`${or}/api/brands${t.toString()?"?"+t.toString():""}`;try{const u=await fetch(o);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const f=await u.json();s.value=f.data||[]}catch(u){l.value=u.message,console.error("Error fetching all brands:",u)}finally{a.value=!1}}}}const ar="http://test.dennistp.beget.tech";function pr(){const s=x([]),a=x(!1),l=x(null);return{colors:s,loading:a,error:l,fetchAllColors:async()=>{a.value=!0,l.value=null;const t=new URLSearchParams;t.append("per_page","all");const o=`${ar}/api/colors${t.toString()?"?"+t.toString():""}`;try{const u=await fetch(o);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const f=await u.json();s.value=f.data||[]}catch(u){l.value=u.message,console.error("Error fetching all colors:",u)}finally{a.value=!1}}}}function gr(s){const a=H({}),l=()=>{s.value.name.trim()?s.value.name.length>255?a.name="Наименование не должно превышать 255 символов.":a.name="":a.name="Наименование обязательно."},e=()=>{s.value.article.trim()?a.article="":a.article="Артикул обязателен."},t=()=>{!s.value.price||s.value.price<=0?a.price="Цена должна быть положительным числом.":a.price=""},o=()=>{s.value.product_code&&s.value.product_code.length>15?a.productCode="Код товара не должен превышать 15 символов.":a.productCode=""},u=()=>{s.value.unit?a.unit="":a.unit="Единица измерения обязательна."},f=()=>{s.value.category_id?a.category="":a.category="Категория обязательна."},$=()=>{s.value.brand_id?a.brand="":a.brand="Бренд обязателен."},j=()=>{s.value.color_id?a.color="":a.color="Цвет обязателен."},A=()=>{s.value.description.trim()?s.value.description.length<10?a.description="Описание должно содержать не менее 10 символов.":a.description="":a.description="Описание товара обязательно для заполнения."},B=()=>{s.value.texture&&s.value.texture.length>100?a.texture="Поверхность не должна превышать 100 символов.":a.texture=""},_=()=>{s.value.pattern&&s.value.pattern.length>100?a.pattern="Рисунок не должен превышать 100 символов.":a.pattern=""},E=()=>{s.value.country&&s.value.country.length>100?a.country="Страна не должна превышать 100 символов.":a.country=""},L=()=>{s.value.collection&&s.value.collection.length>255?a.collection="Коллекция не должна превышать 255 символов.":a.collection=""},z=()=>{for(const d of s.value.attribute_values)d.attribute.type==="string"&&(d.string_value&&d.string_value.length>255?d.error="Значение не должно превышать 255 символов.":d.error="")},T=()=>{e(),l(),t(),o(),u(),f(),$(),j(),A(),B(),_(),E(),L(),z()},D=()=>Object.values(a).some(d=>d)||s.value.attribute_values.some(d=>d.error);return v(()=>s.value.description,A),v(()=>s.value.article,e),v(()=>s.value.name,d=>{l(),d&&(s.value.slug=d.toLowerCase().replace(/[^a-zа-яё0-9]+/g,"-").replace(/^-|-$/g,""))}),v(()=>s.value.price,t),v(()=>s.value.product_code,o),v(()=>s.value.unit,u),v(()=>s.value.category_id,f),v(()=>s.value.brand_id,$),v(()=>s.value.color_id,j),v(()=>s.value.texture,B),v(()=>s.value.pattern,_),v(()=>s.value.country,E),v(()=>s.value.collection,L),v(()=>s.value.attribute_values,z,{deep:!0}),{errors:a,validateAll:T,hasErrors:D,resetErrors:()=>{Object.keys(a).forEach(d=>{a[d]=""})}}}export{dr as _,pr as a,gr as b,nr as c,ir as d,ur as e,cr as u};
