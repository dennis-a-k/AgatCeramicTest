import{r as w,a as h,c as j,w as A,b as o,d as t,n as p,e as c,v as f,t as m,f as l,g as k,u as v,o as a,h as B}from"./index-BShJ9dlB.js";import{u as F}from"./useAuth-DtldnbWj.js";const L={class:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md"},M={class:"flex justify-center mb-6"},P={key:0,class:"mb-4"},T={key:0,class:"text-red-500 text-sm"},D={class:"mb-4"},N={key:0,class:"mt-1.5 text-theme-xs text-error-500"},R={class:"mb-4"},S={key:0,class:"mt-1.5 text-theme-xs text-error-500"},z={key:1,class:"mb-6"},O={key:0,class:"mt-1.5 text-theme-xs text-error-500"},G={key:2,class:"mb-4 text-center"},H={key:3,class:"mb-4"},I={class:"mt-6 flex gap-2"},J=["disabled"],K={key:0},Q={key:1},W=["disabled"],X={key:0},Y={key:1},Z={key:5,class:"mt-4 p-3 text-green-500 text-center"},se={__name:"LoginForm",setup(ee){const _=B(),{login:C,register:V,forgotPassword:q,loading:g,error:x}=F(),d=w(!0),r=h({name:"",email:"",password:"",password_confirmation:"",remember:!1}),n=h({email:"",show:!1}),i=j(()=>{const u={};if(x.value&&typeof x.value=="object")for(const[e,s]of Object.entries(x.value))Array.isArray(s)&&s.length>0&&(u[e]=s[0]);return u}),y=u=>i.value[u]?"dark:bg-dark-900 shadow-theme-xs focus:border-error-300 focus:ring-error-500/10 dark:focus:border-error-800 h-11 w-full rounded-lg border border-error-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-error-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none":"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none";A(d,()=>{r.name="",r.email="",r.password="",r.password_confirmation="",n.show=!1,n.email="",x.value={}});const b=w(""),U=async()=>{try{await V(r),r.name="",r.email="",r.password="",r.password_confirmation="",d.value=!0,b.value="Регистрация прошла успешно! Теперь вы можете войти в систему.",setTimeout(()=>{b.value=""},5e3)}catch{}},$=async()=>{try{await C(r)&&_.push("/")}catch{}},E=async()=>{try{await q(n.email),n.show=!1,n.email="",b.value="Ссылка для восстановления пароля отправлена на ваш email.",setTimeout(()=>{b.value=""},5e3)}catch{}};return(u,e)=>(a(),o("div",L,[t("div",M,[t("button",{onClick:e[0]||(e[0]=s=>d.value=!0),class:p(["px-4 py-2 font-medium",d.value?"text-brand-500 border-b-2 border-brand-500":"text-gray-500 hover:text-gray-700"])}," Вход ",2),t("button",{onClick:e[1]||(e[1]=s=>d.value=!1),class:p(["px-4 py-2 font-medium",d.value?"text-gray-500 hover:text-gray-700":"text-brand-500 border-b-2 border-brand-500"])}," Регистрация ",2)]),t("form",{onSubmit:e[9]||(e[9]=k(s=>d.value?$():U(),["prevent"]))},[d.value?l("",!0):(a(),o("div",P,[e[10]||(e[10]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"}," ФИО ",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.name=s),id:"name",type:"text",class:p(y("name")),required:""},null,2),[[f,r.name]]),i.value.name?(a(),o("div",T,m(i.value.name),1)):l("",!0)])),t("div",D,[e[11]||(e[11]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"email"}," Почта ",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.email=s),id:"email",type:"email",class:p(y("email")),required:""},null,2),[[f,r.email]]),i.value.email?(a(),o("div",N,m(i.value.email),1)):l("",!0)]),t("div",R,[e[12]||(e[12]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"}," Пароль ",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.password=s),id:"password",type:"password",class:p(y("password")),required:""},null,2),[[f,r.password]]),i.value.password?(a(),o("div",S,m(i.value.password),1)):l("",!0)]),d.value?l("",!0):(a(),o("div",z,[e[13]||(e[13]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password_confirmation"}," Повторить пароль ",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.password_confirmation=s),id:"password_confirmation",type:"password",class:p(y("password_confirmation")),required:""},null,2),[[f,r.password_confirmation]]),i.value.password_confirmation?(a(),o("div",O,m(i.value.password_confirmation),1)):l("",!0)])),d.value&&!n.show?(a(),o("div",G,[t("a",{href:"#",onClick:e[6]||(e[6]=k(s=>n.show=!0,["prevent"])),class:"text-brand-500 hover:text-brand-600 text-sm"}," Восстановить пароль ")])):l("",!0),n.show?(a(),o("div",H,[e[14]||(e[14]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"forgot_email"}," Почта для восстановления ",-1)),c(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>n.email=s),id:"forgot_email",type:"email",class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none",required:""},null,512),[[f,n.email]]),t("div",I,[t("button",{onClick:E,class:"flex-1 bg-brand-500 text-white py-2 px-4 rounded-lg hover:bg-brand-600 transition duration-200",disabled:v(g)},[v(g)?(a(),o("span",Q,"Отправка...")):(a(),o("span",K,"Отправить"))],8,J),t("button",{onClick:e[8]||(e[8]=s=>{n.show=!1,n.email=""}),class:"flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition duration-200"}," Отмена ")])])):l("",!0),n.show?l("",!0):(a(),o("button",{key:4,type:"submit",class:"w-full bg-brand-500 text-white py-2 px-4 rounded-lg hover:bg-brand-600 transition duration-200",disabled:v(g)},[v(g)?(a(),o("span",Y,m(d.value?"Авторизация...":"Регистрация..."),1)):(a(),o("span",X,m(d.value?"Войти":"Зарегистрироваться"),1))],8,W)),b.value?(a(),o("div",Z,m(b.value),1)):l("",!0)],32)]))}};export{se as default};
