import{r as x,a as _,w as V,c as o,b as t,n as f,d as b,v as m,e as p,u as n,t as i,F as q,f as C,g as L,o as d,h as U}from"./index-DF0FL0Im.js";import{u as B}from"./useAuth-BxJYd6y_.js";const F={class:"max-w-md mx-auto mt-8 p-4 bg-white rounded-lg shadow-md"},M={class:"flex justify-center mb-6"},$={key:0,class:"mb-4"},D={class:"mb-4"},N={class:"mb-4"},R={key:1,class:"mb-6"},S=["disabled"],T={key:0},j={key:1},z={key:2,class:"mt-4 text-red-500 text-sm text-center"},A={key:0,class:"list-none list-inside"},E={key:1},G={key:3,class:"mt-4 p-3 text-green-500 text-center"},K={__name:"LoginForm",setup(H){const y=U(),{login:k,register:w,loading:c,error:l}=B(),s=x(!0),r=_({name:"",email:"",password:"",password_confirmation:"",remember:!1});V(s,()=>{r.name="",r.email="",r.password="",r.password_confirmation="",l.value=""});const u=x(""),h=async()=>{try{await w(r),r.name="",r.email="",r.password="",r.password_confirmation="",s.value=!0,u.value="Регистрация прошла успешно! Теперь вы можете войти в систему.",setTimeout(()=>{u.value=""},5e3)}catch{}},v=async()=>{try{await k(r)&&y.push("/")}catch{}};return(g,e)=>(d(),o("div",F,[t("div",M,[t("button",{onClick:e[0]||(e[0]=a=>s.value=!0),class:f(["px-4 py-2 font-medium",s.value?"text-brand-500 border-b-2 border-brand-500":"text-gray-500 hover:text-gray-700"])}," Вход ",2),t("button",{onClick:e[1]||(e[1]=a=>s.value=!1),class:f(["px-4 py-2 font-medium",s.value?"text-gray-500 hover:text-gray-700":"text-brand-500 border-b-2 border-brand-500"])}," Регистрация ",2)]),t("form",{onSubmit:e[6]||(e[6]=L(a=>s.value?v():h(),["prevent"]))},[s.value?p("",!0):(d(),o("div",$,[e[7]||(e[7]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"}," ФИО ",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.name=a),id:"name",type:"text",class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none",required:""},null,512),[[m,r.name]])])),t("div",D,[e[8]||(e[8]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"email"}," Почта ",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.email=a),id:"email",type:"email",class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none",required:""},null,512),[[m,r.email]])]),t("div",N,[e[9]||(e[9]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"}," Пароль ",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.password=a),id:"password",type:"password",class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none",required:""},null,512),[[m,r.password]])]),s.value?p("",!0):(d(),o("div",R,[e[10]||(e[10]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password_confirmation"}," Повторить пароль ",-1)),b(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.password_confirmation=a),id:"password_confirmation",type:"password",class:"dark:bg-dark-900 shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 appearance-none",required:""},null,512),[[m,r.password_confirmation]])])),t("button",{type:"submit",class:"w-full bg-brand-500 text-white py-2 px-4 rounded-lg hover:bg-brand-600 transition duration-200",disabled:n(c)},[n(c)?(d(),o("span",j,i(s.value?"Авторизация...":"Регистрация..."),1)):(d(),o("span",T,i(s.value?"Войти":"Зарегистрироваться"),1))],8,S),n(l)&&n(l).length>0?(d(),o("div",z,[n(l).length>1?(d(),o("ul",A,[(d(!0),o(q,null,C(n(l),a=>(d(),o("li",{key:a},i(a),1))),128))])):(d(),o("span",E,i(n(l)[0]),1))])):p("",!0),u.value?(d(),o("div",G,i(u.value),1)):p("",!0)],32)]))}};export{K as default};
