import{r as n,b as j,c as z,w as H,u as J,o as K,a as r,d as e,e as P,f as L}from"./index-CgbsGXzC.js";import{a as W,_ as X,P as Y}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-D4jVCWQ3.js";import{u as Z,_ as ee}from"./useCategories-BM9NyCLb.js";import{_ as oe,a as se,b as te,c as ae,D as re,S as le}from"./GoodsPagination-CLBUdK8d.js";import{P as ne,S as ce}from"./DeleteConfirmationModal-CcbG3fwD.js";import{u as ue}from"./useGoods-CByg4lu5.js";import{u as de}from"./useProductAlerts-C0ANFgNh.js";const ie={class:"space-y-5 sm:space-y-6"},ge={class:"rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},xe={__name:"Goods",setup(pe){const m=L(),c=J(),f=n("Товары"),b=Y,I=re,k=ne,x=le,v=ce,{alerts:_,showAlert:u}=de(),{products:w,loading:y,error:S,sort:N,page:T,itemsPerPage:$,totalItems:d,totalPages:B,searchQuery:i,selectedCategory:g,filters:t,visiblePages:D,formatter:F,fetchProducts:p,handleSortBy:U,handlePrevPage:G,handleNextPage:C,handleGoToPage:Q,deleteProduct:O}=ue(),{categories:q,fetchCategories:A}=Z(),h=n(!1),l=n(!1),E=()=>{l.value=!l.value},R=a=>{g.value=a.value===null?null:a,l.value=!1},V=a=>{m.push(`/products/edit/${a.id}`)},M=async(a,o)=>{const s=await O(a.id);o(s)};return j(()=>{A(),p(),c.query.success==="created"?u("success","Успешно","Товар создан"):c.query.success==="updated"&&u("success","Успешно","Товар обновлен")}),(a,o)=>(K(),z(W,null,{default:H(()=>[r(ee,{alerts:e(_)},null,8,["alerts"]),r(X,{pageTitle:f.value},null,8,["pageTitle"]),P("div",ie,[P("div",ge,[r(oe,{totalItems:e(d),packageIcon:e(b),downloadIcon:e(I),plusIcon:e(k)},null,8,["totalItems","packageIcon","downloadIcon","plusIcon"]),r(se,{searchQuery:e(i),categories:e(q),selectedItem:e(g),isOpen:l.value,showFilter:h.value,checkboxSale:e(t).sale.true,checkboxNoSale:e(t).sale.false,checkboxPublished:e(t).published.true,checkboxNoPublished:e(t).published.false,searchIcon:e(v),settingsIcon:e(x),"onUpdate:searchQuery":o[0]||(o[0]=s=>i.value=s),onToggleDropdown:E,onToggleItem:R,"onUpdate:showFilter":o[1]||(o[1]=s=>h.value=s),"onUpdate:checkboxSale":o[2]||(o[2]=s=>e(t).sale.true=s),"onUpdate:checkboxNoSale":o[3]||(o[3]=s=>e(t).sale.false=s),"onUpdate:checkboxPublished":o[4]||(o[4]=s=>e(t).published.true=s),"onUpdate:checkboxNoPublished":o[5]||(o[5]=s=>e(t).published.false=s)},null,8,["searchQuery","categories","selectedItem","isOpen","showFilter","checkboxSale","checkboxNoSale","checkboxPublished","checkboxNoPublished","searchIcon","settingsIcon"]),r(te,{loading:e(y),error:e(S),products:e(w),formatter:e(F),sort:e(N),onSortBy:e(U),onFetchProducts:e(p),onEdit:V,onDelete:M},null,8,["loading","error","products","formatter","sort","onSortBy","onFetchProducts"]),r(ae,{page:e(T),totalPages:e(B),totalItems:e(d),itemsPerPage:e($),visiblePages:e(D),onPrevPage:e(G),onNextPage:e(C),onGoToPage:e(Q)},null,8,["page","totalPages","totalItems","itemsPerPage","visiblePages","onPrevPage","onNextPage","onGoToPage"])])])]),_:1}))}};export{xe as default};
