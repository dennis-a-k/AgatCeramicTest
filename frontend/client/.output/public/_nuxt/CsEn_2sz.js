import{_ as V}from"./J-T6rV--.js";import{_ as h,z as q,H as N,r as p,f as U,y as g,o as l,w as y,a as e,c as i,u as c,b as B,e as S,d as T,F as C,m as D,t as r,D as A,I as d,J as u,A as E,K as F}from"#entry";const L={class:"checkout-page"},M={class:"container"},O={key:1},I={key:0,class:"empty-cart"},P={key:1,class:"checkout-content"},z={class:"order-summary"},H={class:"order-items"},J={class:"item-info"},K=["src","alt"],$={class:"item-price"},j={class:"order-total"},G={class:"form-group"},Q={class:"form-group"},R={class:"form-group"},W={class:"form-group"},X={class:"form-group"},Y=["disabled"],Z={__name:"index",setup(ee){const n=q(),{$toast:v}=N(),m=p(!1),_=p(!0);U(()=>{setTimeout(()=>{_.value=!1},500)});const o=p({name:"",email:"",phone:"",address:"",comment:""}),f=a=>Number(a).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," "),b=async()=>{m.value=!0;try{const a={customer:o.value,items:n.items,total:n.total};console.log("Order data:",a),await new Promise(t=>setTimeout(t,2e3)),n.clearCart(),o.value={name:"",email:"",phone:"",address:"",comment:""},v.success("Заказ успешно оформлен! Мы свяжемся с вами в ближайшее время."),await F("/")}catch(a){console.error("Error submitting order:",a),v.error("Произошла ошибка при оформлении заказа. Попробуйте еще раз.")}finally{m.value=!1}};return(a,t)=>{const x=V,k=S,w=E;return l(),g(w,null,{default:y(()=>[e("div",L,[e("div",M,[_.value?(l(),g(x,{key:0,text:"Загрузка страницы оформления..."})):(l(),i("div",O,[t[14]||(t[14]=e("h1",{class:"page-title"},"Оформление заказа",-1)),c(n).items.length===0?(l(),i("div",I,[t[6]||(t[6]=e("p",null,"Ваша корзина пуста",-1)),B(k,{to:"/",class:"btn"},{default:y(()=>[...t[5]||(t[5]=[T("Вернуться к покупкам",-1)])]),_:1})])):(l(),i("div",P,[e("div",z,[t[7]||(t[7]=e("h2",null,"Ваш заказ",-1)),e("div",H,[(l(!0),i(C,null,D(c(n).items,s=>(l(),i("div",{key:s.id,class:"order-item"},[e("div",J,[e("img",{src:s.image,alt:s.title},null,8,K),e("div",null,[e("h4",null,r(s.title),1),e("p",null,r(s.weight_kg)+" кг × "+r(s.quantity),1)])]),e("div",$,r(f(s.price*s.quantity))+" ₽",1)]))),128))]),e("div",j,[e("strong",null,"Итого: "+r(f(c(n).total))+" ₽",1)])]),e("form",{onSubmit:A(b,["prevent"]),class:"checkout-form"},[t[13]||(t[13]=e("h2",null,"Контактные данные",-1)),e("div",G,[t[8]||(t[8]=e("label",{for:"name"},"Имя *",-1)),d(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.name=s),required:""},null,512),[[u,o.value.name]])]),e("div",Q,[t[9]||(t[9]=e("label",{for:"email"},"Email *",-1)),d(e("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.email=s),required:""},null,512),[[u,o.value.email]])]),e("div",R,[t[10]||(t[10]=e("label",{for:"phone"},"Телефон *",-1)),d(e("input",{type:"tel",id:"phone","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.phone=s),required:""},null,512),[[u,o.value.phone]])]),e("div",W,[t[11]||(t[11]=e("label",{for:"address"},"Адрес доставки *",-1)),d(e("textarea",{id:"address","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.address=s),required:""},null,512),[[u,o.value.address]])]),e("div",X,[t[12]||(t[12]=e("label",{for:"comment"},"Комментарий к заказу",-1)),d(e("textarea",{id:"comment","onUpdate:modelValue":t[4]||(t[4]=s=>o.value.comment=s)},null,512),[[u,o.value.comment]])]),e("button",{type:"submit",class:"btn submit-btn",disabled:m.value},r(m.value?"Оформление...":"Оформить заказ"),9,Y)],32)]))]))])])]),_:1})}}},oe=h(Z,[["__scopeId","data-v-fd413ef8"]]);export{oe as default};
