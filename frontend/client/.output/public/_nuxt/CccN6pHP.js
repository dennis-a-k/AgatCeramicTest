import{_ as N,A as T,K as I,r as x,d as p,x as L,f as i,i as _,g as v,T as B,e as r,m,j as e,t as n,y as d,L as Q,M as z,q as A,B as D,s as U,F as O}from"#entry";const W={key:0,class:"custom-modal",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},E={class:"modal-content"},K={class:"modal-body"},G={class:"product-quickview"},H={class:"product-image"},J=["src","alt"],X={class:"product-info"},Y={class:"category"},Z={id:"modal-title",class:"product-title"},tt={class:"price"},et={class:"new"},st={class:"info"},at={key:0},ot={key:1},nt={key:2},lt={class:"actions"},ut={class:"quantity-selector d-flex"},ct={class:"cart-plus-minus me-2"},it={key:0},rt={__name:"ModalsAppModalQuickView",setup(l,{expose:w}){const C=T(),{$toast:y}=I(),q=U(),g=x(!1),t=x({}),c=x(1),M=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),b=o=>o.image_path.startsWith("http")?o.image_path:`${q.public.apiBase}/storage/${o.image_path}`,f=p(()=>t.value.images&&t.value.images.length>0?b(t.value.images[0]):t.value.imgSrc&&t.value.imgSrc.trim()!==""?t.value.imgSrc:"/images/stock/stock-image.png"),k=p(()=>{const o=t.value?.attribute_values?.find(s=>s.attribute.slug==="ves");return o?o.number_value:null}),$=p(()=>{const o=t.value?.attribute_values?.find(s=>s.attribute.slug==="razmery");return o?o.string_value:null}),V=p(()=>M.format(t.value.price||0)),u=o=>{t.value=o,g.value=!0},a=()=>{g.value=!1,c.value=1},h=()=>{c.value+=1},S=()=>{c.value>1&&(c.value-=1)},R=()=>{const o=t.value.attribute_values?.find(s=>s.attribute.slug==="ves");C.addToCart({id:t.value.id,slug:t.value.slug,title:t.value.name,weight_kg:o?.number_value||t.value.weight_kg,quantity:c.value,price:t.value.price,unit:t.value.unit,image:f.value}),y.success("Товар добавлен в корзину!"),a()};return w({openModal:u,closeModal:a}),(o,s)=>{const F=A,P=D;return i(),L(P,null,{default:_(()=>[v(B,{name:"overlay"},{default:_(()=>[g.value?(i(),r("div",{key:0,class:"modal-overlay",onClick:a,"aria-hidden":"true"})):m("",!0)]),_:1}),v(B,{name:"modal"},{default:_(()=>[g.value?(i(),r("div",W,[e("div",E,[e("div",K,[e("button",{type:"button",class:"btn-close-modal",onClick:a,"aria-label":"Закрыть"}),e("div",G,[e("div",H,[e("img",{src:f.value,alt:t.value.name},null,8,J)]),e("div",X,[e("span",Y,n(t.value.category.name),1),e("h4",Z,n(t.value.name)+n(k.value?`, ${k.value} кг`:""),1),e("div",tt,[e("span",et,n(V.value),1)]),e("div",st,[e("p",null,[s[1]||(s[1]=e("span",null,"Артикул:",-1)),d(" "+n(t.value.article),1)]),e("p",null,[s[2]||(s[2]=e("span",null,"Бренд:",-1)),d(" "+n(t.value.brand.name),1)]),t.value.collection?(i(),r("p",at,[s[3]||(s[3]=e("span",null,"Коллекция:",-1)),d(" "+n(t.value.collection),1)])):m("",!0),t.value.color?(i(),r("p",ot,[s[4]||(s[4]=e("span",null,"Цвет:",-1)),d(" "+n(t.value.color.name),1)])):m("",!0),$.value?(i(),r("p",nt,[s[5]||(s[5]=e("span",null,"Размеры:",-1)),d(" "+n($.value)+"мм",1)])):m("",!0)]),e("div",lt,[e("div",ut,[e("div",ct,[e("div",{class:"dec qtybutton",onClick:S},"-"),Q(e("input",{class:"cart-plus-minus-box",type:"text",name:"qtybutton","onUpdate:modelValue":s[0]||(s[0]=j=>c.value=j)},null,512),[[z,c.value]]),e("div",{class:"inc qtybutton",onClick:h},"+")]),t.value.unit?(i(),r("p",it,n(t.value.unit==="шт"?"шт.":t.value.unit==="кв.м"?"м²":t.value.unit),1)):m("",!0)]),e("button",{class:"btn btn-primary add-to-cart",onClick:R}," В корзину "),v(F,{to:`/product/${t.value.slug}`,class:"btn btn-outline-primary"},{default:_(()=>[...s[6]||(s[6]=[d("Подробнее",-1)])]),_:1},8,["to"])])])])])])])):m("",!0)]),_:1})]),_:1})}}},dt=N(rt,[["__scopeId","data-v-7d7b2a01"]]),pt={class:"col-lg-4 col-xl-3 col-md-6 col-sm-6 col-xs-6 mb-30px"},mt={class:"product card h-100",style:{border:"none"}},_t={key:0,class:"badges"},vt={class:"thumb d-flex justify-content-center align-items-center",style:{"aspect-ratio":"1 / 1"}},gt=["src","alt"],bt=["src","alt"],ht={class:"content text-center"},yt={class:"category"},ft={class:"price"},kt={class:"new"},$t={class:"title"},xt={class:"actions"},wt=["data-product-id"],Ct=["data-id"],qt={__name:"ProductAppProductCard",props:{product:{type:Object,required:!0}},setup(l){const w=T(),{$toast:C}=I(),y=x(null),q=U(),g=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),t=l,c=p(()=>{const u=t.product.attribute_values?.find(a=>a.attribute.slug==="ves");return u?u.number_value:null}),M=u=>u.image_path.startsWith("http")?u.image_path:`${q.public.apiBase}/storage/${u.image_path}`,b=p(()=>t.product.images&&t.product.images.length>0?M(t.product.images[0]):t.product.imgSrc&&t.product.imgSrc.trim()!==""?t.product.imgSrc:"/images/stock/stock-image.png"),f=p(()=>g.format(t.product.price)),k=p(()=>t.product.name.slice(0,80)),$=()=>{const u=t.product.attribute_values?.find(a=>a.attribute.slug==="ves");w.addToCart({id:t.product.id,slug:t.product.slug,title:t.product.name,weight_kg:u?.number_value||t.product.weight_kg,quantity:1,price:t.product.price,unit:t.product.unit,image:b.value}),C.success("Товар добавлен в корзину!")},V=()=>{y.value.openModal(t.product)};return(u,a)=>{const h=A,S=dt;return i(),r(O,null,[e("div",pt,[e("div",mt,[l.product.is_sale?(i(),r("span",_t,[...a[0]||(a[0]=[e("span",{class:"new"},"Распродажа",-1)])])):m("",!0),e("div",vt,[v(h,{to:`/product/${l.product.slug}`,class:"image"},{default:_(()=>[e("img",{src:b.value,alt:l.product.name},null,8,gt),e("img",{src:b.value,alt:l.product.name,class:"hover-image"},null,8,bt)]),_:1},8,["to"])]),e("div",ht,[e("span",yt,[v(h,{to:`/category/${l.product.category.slug}`},{default:_(()=>[d(n(l.product.category.name),1)]),_:1},8,["to"])]),e("span",ft,[e("span",kt,n(f.value),1)]),e("h5",$t,[v(h,{to:`/product/${l.product.slug}`},{default:_(()=>[d(n(k.value)+n(c.value?`, ${c.value} кг`:""),1)]),_:1},8,["to"])])]),e("div",xt,[e("button",{class:"action add-cart","data-product-id":l.product.id,onClick:$,title:"В корзину"},[...a[1]||(a[1]=[e("i",{class:"pe-7s-cart"},null,-1)])],8,wt),e("button",{class:"action quickview",title:"Посмотреть","data-id":l.product.id,onClick:V},[...a[2]||(a[2]=[e("i",{class:"pe-7s-look"},null,-1)])],8,Ct)])])]),v(S,{ref_key:"quickViewModal",ref:y},null,512)],64)}}},Vt=N(qt,[["__scopeId","data-v-2e9745ea"]]);export{Vt as _};
