import{_ as f}from"./D7OoCMRG.js";import{e as v,r as c,f as h,g as y,c as r,o as n,a as e,b as w,w as k,d as C,h as l,t as u,i as L,j as N,v as V,k as B,F as T,l as j,_ as D}from"./BLb0ab18.js";const F={class:"container mx-auto px-4 py-8"},M={key:0,class:"text-center"},P={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},$={key:2},q={class:"mb-6"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},I={class:"p-4"},Q={class:"text-lg font-semibold mb-2"},R={class:"text-gray-600 text-sm mb-3"},S={class:"flex justify-between items-center"},U={class:"text-2xl font-bold text-blue-600"},z=["onClick"],A={key:0,class:"text-center py-12"},G=v({__name:"products",setup(H){const d=c(""),a=c([]),p=c(!0),i=c(null),x=async()=>{try{p.value=!0,i.value=null;const s=await $fetch("/api/products");a.value=s.products.data}catch(s){i.value=s,console.error("Ошибка загрузки товаров:",s)}finally{p.value=!1}};h(()=>{x()});const m=()=>{x()},g=y(()=>{if(!a.value)return[];const s=d.value.toLowerCase().trim();return s?a.value.filter(t=>t.name?.toLowerCase().includes(s)||t.description?.toLowerCase().includes(s)):a.value}),_=s=>{console.log("Добавлено в корзину:",s)};return(s,t)=>{const b=f;return n(),r("div",F,[t[4]||(t[4]=e("h1",{class:"text-3xl font-bold mb-8"},"Наши товары",-1)),w(b,{to:"/",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-lg font-medium transition-colors"},{default:k(()=>[...t[1]||(t[1]=[C(" Главная страница ",-1)])]),_:1}),t[5]||(t[5]=e("hr",null,null,-1)),l(p)?(n(),r("div",M,[...t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4"},"Загрузка товаров...",-1)])])):l(i)?(n(),r("div",P,[e("p",null,"Ошибка при загрузке товаров: "+u(l(i).message),1),e("button",{onClick:m,class:"mt-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded"}," Попробовать снова ")])):(n(),r("div",$,[e("div",q,[N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>B(d)?d.value=o:null),type:"text",placeholder:"Поиск товаров...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[V,l(d)]])]),e("div",E,[(n(!0),r(T,null,j(l(g),o=>(n(),r("div",{key:o.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",I,[e("h3",Q,u(o.name),1),e("p",R,u(o.description),1),e("div",S,[e("span",U,u(o.price)+" ₽",1),e("button",{onClick:J=>_(o),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"}," В корзину ",8,z)])])]))),128))]),l(g).length===0?(n(),r("div",A,[...t[3]||(t[3]=[e("p",{class:"text-gray-500 text-lg"},"Товары не найдены",-1)])])):L("",!0)]))])}}}),W=D(G,[["__scopeId","data-v-cc187d90"]]);export{W as default};
