import{_ as S,z as N,J as T,r as x,j as d,y as P,o as u,w as v,b as m,T as M,c as i,s as p,a as e,t as a,d as r,K as R,L as j,e as A,A as z,F as L}from"#entry";const Q={key:0,class:"custom-modal",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},D={class:"modal-content"},O={class:"modal-body"},E={class:"product-quickview"},J={class:"product-image"},K=["src","alt"],G={class:"product-info"},H={class:"category"},W={id:"modal-title",class:"product-title"},X={class:"price"},Y={class:"new"},Z={class:"info"},tt={key:0},et={key:1},st={key:2},ot={class:"actions"},at={class:"quantity-selector d-flex"},lt={class:"cart-plus-minus me-2"},nt={key:0},ct={__name:"ModalsAppModalQuickView",setup(l,{expose:$}){const C=N(),{$toast:k}=T(),g=x(!1),t=x({}),n=x(1),b=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),f=d(()=>t.value.imgSrc&&t.value.imgSrc.trim()!==""?t.value.imgSrc:"/images/stock/stock-image.png"),h=d(()=>{const c=t.value?.attribute_values?.find(s=>s.attribute.slug==="ves");return c?c.number_value:null}),w=d(()=>{const c=t.value?.attribute_values?.find(s=>s.attribute.slug==="razmery");return c?c.string_value:null}),q=d(()=>b.format(t.value.price||0)),_=c=>{t.value=c,g.value=!0},o=()=>{g.value=!1,n.value=1},y=()=>{n.value+=1},V=()=>{n.value>1&&(n.value-=1)},B=()=>{const c=t.value.attribute_values?.find(s=>s.attribute.slug==="ves");C.addToCart({id:t.value.id,slug:t.value.slug,title:t.value.name,weight_kg:c?.number_value||t.value.weight_kg,quantity:n.value,price:t.value.price,unit:t.value.unit,image:f.value}),k.success("Товар добавлен в корзину!"),o()};return $({openModal:_,closeModal:o}),(c,s)=>{const I=A,U=z;return u(),P(U,null,{default:v(()=>[m(M,{name:"overlay"},{default:v(()=>[g.value?(u(),i("div",{key:0,class:"modal-overlay",onClick:o,"aria-hidden":"true"})):p("",!0)]),_:1}),m(M,{name:"modal"},{default:v(()=>[g.value?(u(),i("div",Q,[e("div",D,[e("div",O,[e("button",{type:"button",class:"btn-close-modal",onClick:o,"aria-label":"Закрыть"}),e("div",E,[e("div",J,[e("img",{src:f.value,alt:t.value.name},null,8,K)]),e("div",G,[e("span",H,a(t.value.category.name),1),e("h4",W,a(t.value.name)+a(h.value?`, ${h.value} кг`:""),1),e("div",X,[e("span",Y,a(q.value),1)]),e("div",Z,[e("p",null,[s[1]||(s[1]=e("span",null,"Артикул:",-1)),r(" "+a(t.value.article),1)]),e("p",null,[s[2]||(s[2]=e("span",null,"Бренд:",-1)),r(" "+a(t.value.brand.name),1)]),t.value.collection?(u(),i("p",tt,[s[3]||(s[3]=e("span",null,"Коллекция:",-1)),r(" "+a(t.value.collection),1)])):p("",!0),t.value.color?(u(),i("p",et,[s[4]||(s[4]=e("span",null,"Цвет:",-1)),r(" "+a(t.value.color.name),1)])):p("",!0),w.value?(u(),i("p",st,[s[5]||(s[5]=e("span",null,"Размеры:",-1)),r(" "+a(w.value)+"мм",1)])):p("",!0)]),e("div",ot,[e("div",at,[e("div",lt,[e("div",{class:"dec qtybutton",onClick:V},"-"),R(e("input",{class:"cart-plus-minus-box",type:"text",name:"qtybutton","onUpdate:modelValue":s[0]||(s[0]=F=>n.value=F)},null,512),[[j,n.value]]),e("div",{class:"inc qtybutton",onClick:y},"+")]),t.value.unit?(u(),i("p",nt,a(t.value.unit==="шт"?"шт.":t.value.unit==="кв.м"?"м²":t.value.unit),1)):p("",!0)]),e("button",{class:"btn btn-primary add-to-cart",onClick:B}," В корзину "),m(I,{to:`/product/${t.value.slug}`,class:"btn btn-outline-primary"},{default:v(()=>[...s[6]||(s[6]=[r("Подробнее",-1)])]),_:1},8,["to"])])])])])])])):p("",!0)]),_:1})]),_:1})}}},ut=S(ct,[["__scopeId","data-v-2875bfc6"]]),it={class:"col-lg-4 col-xl-3 col-md-6 col-sm-6 col-xs-6 mb-30px"},rt={class:"product card h-100",style:{border:"none"}},dt={key:0,class:"badges"},_t={class:"thumb d-flex justify-content-center align-items-center",style:{"aspect-ratio":"1 / 1"}},pt=["src","alt"],vt=["src","alt"],mt={class:"content text-center"},gt={class:"category"},bt={class:"price"},yt={class:"new"},kt={class:"title"},ft={class:"actions"},ht=["data-product-id"],wt=["data-id"],xt={__name:"ProductAppProductCard",props:{product:{type:Object,required:!0}},setup(l){const $=N(),{$toast:C}=T(),k=x(null),g=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),t=l,n=d(()=>{const _=t.product.attribute_values?.find(o=>o.attribute.slug==="ves");return _?_.number_value:null}),b=d(()=>t.product.imgSrc&&t.product.imgSrc.trim()!==""?t.product.imgSrc:"/images/stock/stock-image.png"),f=d(()=>g.format(t.product.price)),h=d(()=>t.product.name.slice(0,80)),w=()=>{const _=t.product.attribute_values?.find(o=>o.attribute.slug==="ves");$.addToCart({id:t.product.id,slug:t.product.slug,title:t.product.name,weight_kg:_?.number_value||t.product.weight_kg,quantity:1,price:t.product.price,unit:t.product.unit,image:b.value}),C.success("Товар добавлен в корзину!")},q=()=>{k.value.openModal(t.product)};return(_,o)=>{const y=A,V=ut;return u(),i(L,null,[e("div",it,[e("div",rt,[l.product.is_sale?(u(),i("span",dt,[...o[0]||(o[0]=[e("span",{class:"new"},"Распродажа",-1)])])):p("",!0),e("div",_t,[m(y,{to:`/product/${l.product.slug}`,class:"image"},{default:v(()=>[e("img",{src:b.value,alt:l.product.name},null,8,pt),e("img",{src:b.value,alt:l.product.name,class:"hover-image"},null,8,vt)]),_:1},8,["to"])]),e("div",mt,[e("span",gt,[m(y,{to:`/category/${l.product.category.slug}`},{default:v(()=>[r(a(l.product.category.name),1)]),_:1},8,["to"])]),e("span",bt,[e("span",yt,a(f.value),1)]),e("h5",kt,[m(y,{to:`/product/${l.product.slug}`},{default:v(()=>[r(a(h.value)+a(n.value?`, ${n.value} кг`:""),1)]),_:1},8,["to"])])]),e("div",ft,[e("button",{class:"action add-cart","data-product-id":l.product.id,onClick:w,title:"В корзину"},[...o[1]||(o[1]=[e("i",{class:"pe-7s-cart"},null,-1)])],8,ht),e("button",{class:"action quickview",title:"Посмотреть","data-id":l.product.id,onClick:q},[...o[2]||(o[2]=[e("i",{class:"pe-7s-look"},null,-1)])],8,wt)])])]),m(V,{ref_key:"quickViewModal",ref:k},null,512)],64)}}},Ct=S(xt,[["__scopeId","data-v-ca67ddc4"]]);export{Ct as _};
