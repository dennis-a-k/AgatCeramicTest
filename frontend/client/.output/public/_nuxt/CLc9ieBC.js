import{_ as B,A as T,K as U,r as x,d as p,x as j,f as i,i as _,g as v,T as V,e as r,m,j as e,t as n,y as d,L as Q,M as z,q as I,B as D,s as A,F as O}from"#entry";const W={key:0,class:"custom-modal",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},E={class:"modal-content"},K={class:"modal-body"},G={class:"product-quickview"},H={class:"product-image"},J=["src","alt"],X={class:"product-info"},Y={class:"category"},Z={id:"modal-title",class:"product-title"},tt={class:"price"},et={class:"new"},at={class:"info mb-5"},st={key:0},ot={key:1},nt={key:2},lt={class:"actions"},ut={class:"quantity-selector d-flex"},ct={class:"cart-plus-minus me-2"},it={key:0},rt={__name:"ModalsAppModalQuickView",setup(u,{expose:w}){const C=T(),{$toast:h}=U(),S=A(),g=x(!1),t=x({}),c=x(1),q=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),b=o=>o.image_path.startsWith("http")?o.image_path:`${S.public.apiBase}/storage/${o.image_path}`,y=p(()=>t.value.images&&t.value.images.length>0?b(t.value.images[0]):t.value.imgSrc&&t.value.imgSrc.trim()!==""?t.value.imgSrc:"/images/stock/stock-image.png"),k=p(()=>{const o=t.value?.attribute_values?.find(a=>a.attribute.slug==="ves");if(o&&o.number_value!==null){const a=parseFloat(o.number_value);return isNaN(a)?o.number_value:a.toLocaleString("en-US")}return null}),$=p(()=>{const o=t.value?.attribute_values?.find(a=>a.attribute.slug==="razmery");return o?o.string_value:null}),N=p(()=>q.format(t.value.price||0)),l=o=>{t.value=o,g.value=!0},s=()=>{g.value=!1,c.value=1},f=()=>{c.value+=1},M=()=>{c.value>1&&(c.value-=1)},F=()=>{const o=t.value.attribute_values?.find(a=>a.attribute.slug==="ves");C.addToCart({id:t.value.id,slug:t.value.slug,title:t.value.name,weight_kg:o?.number_value||t.value.weight_kg,quantity:c.value,price:t.value.price,unit:t.value.unit,image:y.value}),h.success("Товар добавлен в корзину!"),s()};return w({openModal:l,closeModal:s}),(o,a)=>{const L=I,R=D;return i(),j(R,null,{default:_(()=>[v(V,{name:"overlay"},{default:_(()=>[g.value?(i(),r("div",{key:0,class:"modal-overlay",onClick:s,"aria-hidden":"true"})):m("",!0)]),_:1}),v(V,{name:"modal"},{default:_(()=>[g.value?(i(),r("div",W,[e("div",E,[e("div",K,[e("button",{type:"button",class:"btn-close-modal",onClick:s,"aria-label":"Закрыть"}),e("div",G,[e("div",H,[e("img",{src:y.value,alt:t.value.name},null,8,J)]),e("div",X,[e("span",Y,n(t.value.category.name),1),e("h4",Z,n(t.value.name)+n(k.value?`, ${k.value}кг`:""),1),e("div",tt,[e("span",et,n(N.value),1)]),e("div",at,[e("p",null,[a[1]||(a[1]=e("span",null,"Артикул:",-1)),d(" "+n(t.value.article),1)]),e("p",null,[a[2]||(a[2]=e("span",null,"Бренд:",-1)),d(" "+n(t.value.brand.name),1)]),t.value.collection?(i(),r("p",st,[a[3]||(a[3]=e("span",null,"Коллекция:",-1)),d(" "+n(t.value.collection),1)])):m("",!0),t.value.color?(i(),r("p",ot,[a[4]||(a[4]=e("span",null,"Цвет:",-1)),d(" "+n(t.value.color.name),1)])):m("",!0),$.value?(i(),r("p",nt,[a[5]||(a[5]=e("span",null,"Размеры:",-1)),d(" "+n($.value)+"мм",1)])):m("",!0)]),e("div",lt,[e("div",ut,[e("div",ct,[e("div",{class:"dec qtybutton",onClick:M},"-"),Q(e("input",{class:"cart-plus-minus-box",type:"text",name:"qtybutton","onUpdate:modelValue":a[0]||(a[0]=P=>c.value=P)},null,512),[[z,c.value]]),e("div",{class:"inc qtybutton",onClick:f},"+")]),t.value.unit?(i(),r("p",it,n(t.value.unit==="шт"?"шт.":t.value.unit==="кв.м"?"м²":t.value.unit),1)):m("",!0)]),e("button",{class:"btn btn-primary add-to-cart",onClick:F}," В корзину "),v(L,{to:`/product/${t.value.slug}`,class:"btn btn-outline-primary"},{default:_(()=>[...a[6]||(a[6]=[d("Подробнее",-1)])]),_:1},8,["to"])])])])])])])):m("",!0)]),_:1})]),_:1})}}},dt=B(rt,[["__scopeId","data-v-37e7796b"]]),pt={class:"col-lg-4 col-xl-3 col-md-6 col-sm-6 col-xs-6 mb-30px"},mt={class:"product card h-100",style:{border:"none"}},_t={key:0,class:"badges"},vt={class:"thumb d-flex justify-content-center align-items-center",style:{"aspect-ratio":"1 / 1"}},gt=["src","alt"],bt=["src","alt"],ft={class:"content text-center"},ht={class:"category"},yt={class:"price"},kt={class:"new"},$t={class:"title"},xt={class:"actions"},wt=["data-product-id"],Ct=["data-id"],St={__name:"ProductAppProductCard",props:{product:{type:Object,required:!0}},setup(u){const w=T(),{$toast:C}=U(),h=x(null),S=A(),g=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),t=u,c=p(()=>{const l=t.product.attribute_values?.find(s=>s.attribute.slug==="ves");if(l&&l.number_value!==null){const s=parseFloat(l.number_value);return isNaN(s)?l.number_value:s.toLocaleString("en-US")}return null}),q=l=>l.image_path.startsWith("http")?l.image_path:`${S.public.apiBase}/storage/${l.image_path}`,b=p(()=>t.product.images&&t.product.images.length>0?q(t.product.images[0]):t.product.imgSrc&&t.product.imgSrc.trim()!==""?t.product.imgSrc:"/images/stock/stock-image.png"),y=p(()=>g.format(t.product.price)),k=p(()=>t.product.name.slice(0,80)),$=()=>{const l=t.product.attribute_values?.find(s=>s.attribute.slug==="ves");w.addToCart({id:t.product.id,slug:t.product.slug,title:t.product.name,weight_kg:l?.number_value||t.product.weight_kg,quantity:1,price:t.product.price,unit:t.product.unit,image:b.value}),C.success("Товар добавлен в корзину!")},N=()=>{h.value.openModal(t.product)};return(l,s)=>{const f=I,M=dt;return i(),r(O,null,[e("div",pt,[e("div",mt,[u.product.is_sale?(i(),r("span",_t,[...s[0]||(s[0]=[e("span",{class:"new"},"Распродажа",-1)])])):m("",!0),e("div",vt,[v(f,{to:`/product/${u.product.slug}`,class:"image"},{default:_(()=>[e("img",{src:b.value,alt:u.product.name},null,8,gt),e("img",{src:b.value,alt:u.product.name,class:"hover-image"},null,8,bt)]),_:1},8,["to"])]),e("div",ft,[e("span",ht,[v(f,{to:`/category/${u.product.category.slug}`},{default:_(()=>[d(n(u.product.category.name),1)]),_:1},8,["to"])]),e("span",yt,[e("span",kt,n(y.value),1)]),e("h5",$t,[v(f,{to:`/product/${u.product.slug}`},{default:_(()=>[d(n(k.value)+n(c.value?`, ${c.value} кг`:""),1)]),_:1},8,["to"])])]),e("div",xt,[e("button",{class:"action add-cart","data-product-id":u.product.id,onClick:$,title:"В корзину"},[...s[1]||(s[1]=[e("i",{class:"pe-7s-cart"},null,-1)])],8,wt),e("button",{class:"action quickview",title:"Посмотреть","data-id":u.product.id,onClick:N},[...s[2]||(s[2]=[e("i",{class:"pe-7s-look"},null,-1)])],8,Ct)])])]),v(M,{ref_key:"quickViewModal",ref:h},null,512)],64)}}},Nt=B(St,[["__scopeId","data-v-d024bba9"]]);export{Nt as _};
