import{_ as V,z as S,J as M,r as w,j as p,y as P,o as u,w as _,b as v,T as q,c as r,s as m,a as e,t as a,d,K as R,L as j,e as N,A as L,F as Q}from"#entry";const z={key:0,class:"custom-modal",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},D={class:"modal-content"},O={class:"modal-body"},E={class:"product-quickview"},J={class:"product-image"},K=["src","alt"],G={class:"product-info"},H={class:"category"},W={id:"modal-title",class:"product-title"},X={class:"price"},Y={class:"new"},Z={class:"info"},tt={key:0},et={key:1},st={key:2},at={class:"actions"},ot={class:"quantity-selector d-flex"},nt={class:"cart-plus-minus me-2"},lt={key:0},ct={__name:"ModalsAppModalQuickView",setup(o,{expose:x}){const $=S(),{$toast:b}=M(),g=w(!1),t=w({}),n=w(1),C=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),y=p(()=>t.value.imgSrc&&t.value.imgSrc.trim()!==""?t.value.imgSrc:"/images/stock/stock-image.png"),k=p(()=>{const c=t.value?.attribute_values?.find(s=>s.attribute.name==="Вес");return c?c.number_value:null}),f=p(()=>{const c=t.value?.attribute_values?.find(s=>s.attribute.name==="Размеры");return c?c.string_value:null}),h=p(()=>C.format(t.value.price||0)),l=c=>{t.value=c,g.value=!0},i=()=>{g.value=!1,n.value=1},T=()=>{n.value+=1},A=()=>{n.value>1&&(n.value-=1)},B=()=>{const c=t.value.attribute_values?.find(s=>s.attribute.name==="Вес");$.addToCart({id:t.value.id,slug:t.value.slug,title:t.value.name,weight_kg:c?.number_value||t.value.weight_kg,quantity:n.value,price:t.value.price,unit:t.value.unit,image:y.value}),b.success("Товар добавлен в корзину!"),i()};return x({openModal:l,closeModal:i}),(c,s)=>{const I=N,U=L;return u(),P(U,null,{default:_(()=>[v(q,{name:"overlay"},{default:_(()=>[g.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:i,"aria-hidden":"true"})):m("",!0)]),_:1}),v(q,{name:"modal"},{default:_(()=>[g.value?(u(),r("div",z,[e("div",D,[e("div",O,[e("button",{type:"button",class:"btn-close-modal",onClick:i,"aria-label":"Закрыть"}),e("div",E,[e("div",J,[e("img",{src:y.value,alt:t.value.name},null,8,K)]),e("div",G,[e("span",H,a(t.value.category.name),1),e("h4",W,a(t.value.name)+a(k.value?`, ${k.value} кг`:""),1),e("div",X,[e("span",Y,a(h.value),1)]),e("div",Z,[e("p",null,[s[1]||(s[1]=e("span",null,"Артикул:",-1)),d(" "+a(t.value.article),1)]),e("p",null,[s[2]||(s[2]=e("span",null,"Бренд:",-1)),d(" "+a(t.value.brand.name),1)]),t.value.collection?(u(),r("p",tt,[s[3]||(s[3]=e("span",null,"Коллекция:",-1)),d(" "+a(t.value.collection),1)])):m("",!0),t.value.color?(u(),r("p",et,[s[4]||(s[4]=e("span",null,"Цвет:",-1)),d(" "+a(t.value.color.name),1)])):m("",!0),f.value?(u(),r("p",st,[s[5]||(s[5]=e("span",null,"Размеры:",-1)),d(" "+a(f.value)+"мм",1)])):m("",!0)]),e("div",at,[e("div",ot,[e("div",nt,[e("div",{class:"dec qtybutton",onClick:A},"-"),R(e("input",{class:"cart-plus-minus-box",type:"text",name:"qtybutton","onUpdate:modelValue":s[0]||(s[0]=F=>n.value=F)},null,512),[[j,n.value]]),e("div",{class:"inc qtybutton",onClick:T},"+")]),t.value.unit?(u(),r("p",lt,a(t.value.unit==="шт"?"шт.":t.value.unit==="кв.м"?"м²":t.value.unit),1)):m("",!0)]),e("button",{class:"btn btn-primary add-to-cart",onClick:B},"В корзину"),v(I,{to:`/product/${t.value.slug}`,class:"btn btn-outline-primary"},{default:_(()=>[...s[6]||(s[6]=[d("Подробнее",-1)])]),_:1},8,["to"])])])])])])])):m("",!0)]),_:1})]),_:1})}}},ut=V(ct,[["__scopeId","data-v-392a3656"]]),it={class:"col-lg-4 col-xl-3 col-md-6 col-sm-6 col-xs-6 mb-30px"},rt={class:"product card h-100",style:{border:"none"}},dt={key:0,class:"badges"},mt={class:"thumb d-flex justify-content-center align-items-center",style:{"aspect-ratio":"1 / 1"}},pt=["src","alt"],_t=["src","alt"],vt={class:"content text-center"},gt={class:"category"},bt={class:"price"},yt={class:"new"},kt={class:"title"},ft={class:"actions"},ht=["data-product-id"],wt=["data-id"],xt={__name:"ProductAppProductCard",props:{product:{type:Object,required:!0}},setup(o){const x=S(),{$toast:$}=M(),b=w(null),g=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),t=o,n=p(()=>t.product.imgSrc&&t.product.imgSrc.trim()!==""?t.product.imgSrc:"/images/stock/stock-image.png"),C=p(()=>g.format(t.product.price)),y=p(()=>t.product.name.slice(0,80)),k=()=>{const h=t.product.attribute_values?.find(l=>l.attribute.name==="Вес");x.addToCart({id:t.product.id,slug:t.product.slug,title:t.product.name,weight_kg:h?.number_value||t.product.weight_kg,quantity:1,price:t.product.price,unit:t.product.unit,image:n.value}),$.success("Товар добавлен в корзину!")},f=()=>{b.value.openModal(t.product)};return(h,l)=>{const i=N;return u(),r(Q,null,[e("div",it,[e("div",rt,[o.product.is_sale?(u(),r("span",dt,[...l[0]||(l[0]=[e("span",{class:"new"},"Распродажа",-1)])])):m("",!0),e("div",mt,[v(i,{to:`/product/${o.product.slug}`,class:"image"},{default:_(()=>[e("img",{src:n.value,alt:o.product.name},null,8,pt),e("img",{src:n.value,alt:o.product.name,class:"hover-image"},null,8,_t)]),_:1},8,["to"])]),e("div",vt,[e("span",gt,[v(i,{to:`/category/${o.product.category.slug}`},{default:_(()=>[d(a(o.product.category.name),1)]),_:1},8,["to"])]),e("span",bt,[e("span",yt,a(C.value),1)]),e("h5",kt,[v(i,{to:`/product/${o.product.slug}`},{default:_(()=>[d(a(y.value),1)]),_:1},8,["to"])])]),e("div",ft,[e("button",{class:"action add-cart","data-product-id":o.product.id,onClick:k,title:"В корзину"},[...l[1]||(l[1]=[e("i",{class:"pe-7s-cart"},null,-1)])],8,ht),e("button",{class:"action quickview",title:"Посмотреть","data-id":o.product.id,onClick:f},[...l[2]||(l[2]=[e("i",{class:"pe-7s-look"},null,-1)])],8,wt)])])]),v(ut,{ref_key:"quickViewModal",ref:b},null,512)],64)}}},Ct=V(xt,[["__scopeId","data-v-b1756a3c"]]);export{Ct as _};
