import{_ as j}from"./CQxloho8.js";import{_ as I,B as T,L as U,r as w,d as m,x as Q,f as r,i as v,g as i,T as B,e as d,m as _,j as e,t as n,y as p,M as z,N as D,q as A,C as O,s as F,F as W}from"#entry";const E={key:0,class:"custom-modal",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},G={class:"modal-content"},H={class:"modal-body"},J={class:"product-quickview"},K={class:"product-image"},X=["src","alt"],Y={class:"product-info"},Z={class:"category"},tt={id:"modal-title",class:"product-title"},et={class:"price"},at={class:"new"},st={class:"info mb-5"},ot={key:0},nt={key:1},lt={key:2},ut={class:"actions"},ct={class:"quantity-selector d-flex"},rt={class:"cart-plus-minus me-2"},it={key:0},dt={__name:"ModalsAppModalQuickView",setup(u,{expose:C}){const N=T(),{$toast:y}=U(),S=F(),g=w(!1),t=w({}),c=w(1),q=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),b=o=>o.image_path.startsWith("http")?o.image_path:`${S.public.apiBase}/storage/${o.image_path}`,h=m(()=>t.value.images&&t.value.images.length>0?b(t.value.images[0]):t.value.imgSrc&&t.value.imgSrc.trim()!==""?t.value.imgSrc:"/images/stock/stock-image.png"),k=m(()=>{const o=t.value?.attribute_values?.find(a=>a.attribute.slug==="ves");if(o&&o.number_value!==null){const a=parseFloat(o.number_value);return isNaN(a)?o.number_value:a.toLocaleString("en-US")}return null}),x=m(()=>{const o=t.value?.attribute_values?.find(a=>a.attribute.slug==="razmery");return o?o.string_value:null}),M=m(()=>q.format(t.value.price||0)),l=o=>{t.value=o,g.value=!0},s=()=>{g.value=!1,c.value=1},$=()=>{c.value+=1},f=()=>{c.value>1&&(c.value-=1)},V=()=>{const o=t.value.attribute_values?.find(a=>a.attribute.slug==="ves");N.addToCart({id:t.value.id,slug:t.value.slug,title:t.value.name,weight_kg:o?.number_value||t.value.weight_kg,quantity:c.value,price:t.value.price,unit:t.value.unit,image:h.value}),y.success("Товар добавлен в корзину!"),s()};return C({openModal:l,closeModal:s}),(o,a)=>{const L=A,R=O;return r(),Q(R,null,{default:v(()=>[i(B,{name:"overlay"},{default:v(()=>[g.value?(r(),d("div",{key:0,class:"modal-overlay",onClick:s,"aria-hidden":"true"})):_("",!0)]),_:1}),i(B,{name:"modal"},{default:v(()=>[g.value?(r(),d("div",E,[e("div",G,[e("div",H,[e("button",{type:"button",class:"btn-close-modal",onClick:s,"aria-label":"Закрыть"}),e("div",J,[e("div",K,[e("img",{src:h.value,alt:t.value.name},null,8,X)]),e("div",Y,[e("span",Z,n(t.value.category.name),1),e("h4",tt,n(t.value.name)+n(k.value?`, ${k.value}кг`:""),1),e("div",et,[e("span",at,n(M.value),1)]),e("div",st,[e("p",null,[a[1]||(a[1]=e("span",null,"Артикул:",-1)),p(" "+n(t.value.article),1)]),e("p",null,[a[2]||(a[2]=e("span",null,"Бренд:",-1)),p(" "+n(t.value.brand.name),1)]),t.value.collection?(r(),d("p",ot,[a[3]||(a[3]=e("span",null,"Коллекция:",-1)),p(" "+n(t.value.collection),1)])):_("",!0),t.value.color?(r(),d("p",nt,[a[4]||(a[4]=e("span",null,"Цвет:",-1)),p(" "+n(t.value.color.name),1)])):_("",!0),x.value?(r(),d("p",lt,[a[5]||(a[5]=e("span",null,"Размеры:",-1)),p(" "+n(x.value)+"мм",1)])):_("",!0)]),e("div",ut,[e("div",ct,[e("div",rt,[e("div",{class:"dec qtybutton",onClick:f},"-"),z(e("input",{class:"cart-plus-minus-box",type:"text",name:"qtybutton","onUpdate:modelValue":a[0]||(a[0]=P=>c.value=P)},null,512),[[D,c.value]]),e("div",{class:"inc qtybutton",onClick:$},"+")]),t.value.unit?(r(),d("p",it,n(t.value.unit==="шт"?"шт.":t.value.unit==="кв.м"?"м²":t.value.unit),1)):_("",!0)]),e("button",{class:"btn btn-primary add-to-cart",onClick:V}," В корзину "),i(L,{to:`/product/${t.value.slug}`,class:"btn btn-outline-primary"},{default:v(()=>[...a[6]||(a[6]=[p("Подробнее",-1)])]),_:1},8,["to"])])])])])])])):_("",!0)]),_:1})]),_:1})}}},pt=I(dt,[["__scopeId","data-v-37e7796b"]]),mt={class:"col-lg-4 col-xl-3 col-md-6 col-sm-6 col-xs-6 mb-30px"},_t={class:"product card h-100",style:{border:"none"}},vt={key:0,class:"badges"},gt={class:"thumb d-flex justify-content-center align-items-center",style:{"aspect-ratio":"1 / 1"}},bt={class:"content text-center"},ft={class:"category"},yt={class:"price"},ht={class:"new"},kt={class:"title"},xt={class:"actions"},$t=["data-product-id"],wt=["data-id"],Ct={__name:"ProductAppProductCard",props:{product:{type:Object,required:!0}},setup(u){const C=T(),{$toast:N}=U(),y=w(null),S=F(),g=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}),t=u,c=m(()=>{const l=t.product.attribute_values?.find(s=>s.attribute.slug==="ves");if(l&&l.number_value!==null){const s=parseFloat(l.number_value);return isNaN(s)?l.number_value:s.toLocaleString("en-US")}return null}),q=l=>l.image_path.startsWith("http")?l.image_path:`${S.public.apiBase}/storage/${l.image_path}`,b=m(()=>t.product.images&&t.product.images.length>0?q(t.product.images[0]):t.product.imgSrc&&t.product.imgSrc.trim()!==""?t.product.imgSrc:"/images/stock/stock-image.png"),h=m(()=>g.format(t.product.price)),k=m(()=>t.product.name.slice(0,80)),x=()=>{const l=t.product.attribute_values?.find(s=>s.attribute.slug==="ves");C.addToCart({id:t.product.id,slug:t.product.slug,title:t.product.name,weight_kg:l?.number_value||t.product.weight_kg,quantity:1,price:t.product.price,unit:t.product.unit,image:b.value}),N.success("Товар добавлен в корзину!")},M=()=>{y.value.openModal(t.product)};return(l,s)=>{const $=j,f=A,V=pt;return r(),d(W,null,[e("div",mt,[e("div",_t,[u.product.is_sale?(r(),d("span",vt,[...s[0]||(s[0]=[e("span",{class:"new"},"Распродажа",-1)])])):_("",!0),e("div",gt,[i(f,{to:`/product/${u.product.slug}`,class:"image"},{default:v(()=>[i($,{src:b.value,alt:u.product.name},null,8,["src","alt"]),i($,{src:b.value,alt:u.product.name,class:"hover-image"},null,8,["src","alt"])]),_:1},8,["to"])]),e("div",bt,[e("span",ft,[i(f,{to:`/category/${u.product.category.slug}`},{default:v(()=>[p(n(u.product.category.name),1)]),_:1},8,["to"])]),e("span",yt,[e("span",ht,n(h.value),1)]),e("h5",kt,[i(f,{to:`/product/${u.product.slug}`},{default:v(()=>[p(n(k.value)+n(c.value?`, ${c.value} кг`:""),1)]),_:1},8,["to"])])]),e("div",xt,[e("button",{class:"action add-cart","data-product-id":u.product.id,onClick:x,title:"В корзину"},[...s[1]||(s[1]=[e("i",{class:"pe-7s-cart"},null,-1)])],8,$t),e("button",{class:"action quickview",title:"Посмотреть","data-id":u.product.id,onClick:M},[...s[2]||(s[2]=[e("i",{class:"pe-7s-look"},null,-1)])],8,wt)])])]),i(V,{ref_key:"quickViewModal",ref:y},null,512)],64)}}},qt=I(Ct,[["__scopeId","data-v-50b53a21"]]);export{qt as _};
